
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../adcs_pl/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Theoretical background (eng) - Small Satellite ADCS Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Space+Grotesk:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Space Grotesk";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Small Satellite ADCS Documentation" class="md-header__button md-logo" aria-label="Small Satellite ADCS Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Small Satellite ADCS Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Theoretical background (eng)
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="deep-orange"  aria-label="Dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue-gray" data-md-color-accent="deep-purple"  aria-label="Light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/arekdrabik/ADCS" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Code documentation

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  Theoretical background (eng)

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../adcs_pl/" class="md-tabs__link">
        
  
  
    
  
  Podstawy teoretyczne (pl)

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Small Satellite ADCS Documentation" class="md-nav__button md-logo" aria-label="Small Satellite ADCS Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Small Satellite ADCS Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/arekdrabik/ADCS" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code documentation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Theoretical background (eng)
  

    
  </span>
  
  

      </a>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../adcs_pl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Podstawy teoretyczne (pl)
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h1>
<p>The following code performs an ADCS (Attitude Determination and Control System) simulation for a small satellite (CubeSat). It recreates the environment on a given orbit, the object’s parameters, and determines its attitude and dynamics (angular velocity and angular acceleration). The main tasks are detumbling (B-dot) and pointing (B-cross). A magnetometer, Sun sensor, and the TRIAD, QUEST, and EKF algorithms have been implemented. Control is executed using three electromagnetic coils.</p>
<p>The simulation consists of three main elements:
 - Reconstructing orbital and environmental conditions, including Earth’s gravitational field, atmospheric drag, magnetic field, and Sun position.
 - Determining the satellite’s attitude and dynamics based on measurements from sensors (magnetometer, Sun sensor) and data fusion algorithms (TRIAD, QUEST, EKF).
 - Controlling the satellite to carry out detumbling (reducing rotation) and pointing (orienting toward Earth or the Sun) using electromagnetic coils.</p>
<h1 id="preparation">Preparation<a class="headerlink" href="#preparation" title="Permanent link">&para;</a></h1>
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h2>
<p>All code is written in Python and uses dedicated libraries both for mathematical operations and for implementing basic astronomical models. The remainder assumes a working Python installation (preferred 3.13). The environment is managed with Poetry. A concise installation guide is available in its documentation (https://python-poetry.org/docs/). One of the key project files for Poetry is pyproject.toml in the repository root. It defines required libraries and their versions. To ensure compatibility and proper operation, versions are pinned.</p>
<p>To build the environment execute:</p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">poetry</span> <span class="n">install</span>
</span></code></pre></div>
<p>Ways to use the environment:
- Invoking poetry directly (recommended):</p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">poetry</span> <span class="n">run</span> <span class="n">python</span> <span class="n">adcs</span><span class="p">.</span><span class="n">py</span>
</span></code></pre></div>
<ul>
<li>Activating the environment in a terminal:</li>
</ul>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">poetry</span> <span class="n">env</span> <span class="n">activate</span>  <span class="c"># returns a personalized activation command</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="c"># example activation (PowerShell):</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="p">&amp;</span> <span class="s2">&quot;C:\path\to\env\Scripts\Activate.ps1&quot;</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="n">python</span> <span class="n">adcs</span><span class="p">.</span><span class="n">py</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="n">deactivate</span>
</span></code></pre></div>
<ul>
<li>Selecting the created environment in the code editor. This step is required for using Jupyter Notebook.</li>
</ul>
<h2 id="project-structure">Project Structure<a class="headerlink" href="#project-structure" title="Permanent link">&para;</a></h2>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>ADCS/
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>├─ adcs.py
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>├─ mkdocs.yml
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>├─ pyproject.toml
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>├─ docs/
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>│  ├─ index.md
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>│  ├─ adcs.md
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>│  └─ adcs_pl.md
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>├─ core/
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>│  ├─ logger.py
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>│  ├─ state.py
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>│  ├─ transformations.py
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>│  └─ utilities.py
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>├─ spacecraft/
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>│  ├─ actuator.py
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>│  ├─ sensors.py
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>│  └─ satellite.py
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>├─ setup/
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>│  ├─ initial_settings.py
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>│  ├─ initial_settings.json
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>│  ├─ two_line_element.py
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>│  └─ tle
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>├─ templates/
</span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a>│  ├─ actuator_template.py
</span><span id="__span-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>│  ├─ sensor_template.py
</span><span id="__span-3-26"><a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a>│  ├─ satellite_template.py
</span><span id="__span-3-27"><a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a>│  ├─ two_line_element_template.py
</span><span id="__span-3-28"><a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a>│  └─ initial_settings_template.py
</span><span id="__span-3-29"><a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a>├─ visualizations/
</span><span id="__span-3-30"><a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a>│  └─ visualizations.py
</span><span id="__span-3-31"><a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a>└─ tests/
</span><span id="__span-3-32"><a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a>   ├─ conftest.py
</span><span id="__span-3-33"><a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a>   ├─ test_actuator.py
</span><span id="__span-3-34"><a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a>   ├─ test_sensors.py
</span><span id="__span-3-35"><a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a>   └─ test_transformations.py
</span></code></pre></div>
<p>The backbone of the project is the spacecraft folder, which contains the core code responsible for satellite systems.
- The satellite.py script handles general management and coordination of individual elements, integrating everything into a single object through which key satellite parameters can be accessed.
- The sensors.py script contains all code related to measurements: environment simulation, adding noise, and processing via algorithms (TRIAD, QUEST, EKF).
- The actuator.py script handles active elements (in this case only electromagnetic coils). Its role is implementing control algorithms (detumbling and pointing) and managing operation to achieve the expected effect.</p>
<p>The core folder contains helper functions, mainly related to mathematical operations and broadly defined spatial attitude handling and its processing.
- logger.py contains the configured logging module.
- state.py manages the state vector.
- transformations.py focuses on functions related to attitude, such as frame conversions, quaternion operations, and rotations.
- utilities.py contains all remaining helpful functions like date format conversion.</p>
<p>The setup folder gathers information related to simulation settings, input data, and scripts responsible for processing them.
- The tle file stores the Two-Line Element Set describing orbital parameters.
- two_line_element.py loads it and extracts parameters conveniently.
- initial_settings.json stores parameters and settings describing initial state, constants, satellite parameters, and modes. Most variables affecting simulation flow can be managed from it.
- initial_settings.py loads and manages settings from initial_settings.json.</p>
<p>The visualizations folder is related to plots that allow checking simulation progress.
- visualizations.py contains code responsible for creating plots.</p>
<p>The templates folder defines files that form skeletons describing basic contents of key repository elements. Their parameters are required by implementation scripts.</p>
<h2 id="first-run">First Run<a class="headerlink" href="#first-run" title="Permanent link">&para;</a></h2>
<p>Execution can occur in two ways. After building the environment either run adcs.py, which contains an integrated simulation, or use a Jupyter Notebook. With default settings the code will run and should produce normal logs:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>2025-11-14 23:42:20 | INFO | Simulation initialized with the following parameters:
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>2025-11-14 23:42:20 | INFO | Number of iterations: 10000
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>2025-11-14 23:42:20 | INFO | Satellite mass: 1.2 kg
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>2025-11-14 23:42:20 | INFO | Satellite inertia: [[0.002 0.    0.   ]
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a> [0.    0.002 0.   ]
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a> [0.    0.    0.002]] kg*m^2
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>2025-11-14 23:42:20 | INFO | Initial angular velocity: [ 2. -3.  4.] deg/s
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>2025-11-14 23:42:20 | INFO | Initial attitude (Euler angles): [0. 0. 0.] deg
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>2025-11-14 23:42:20 | INFO | Selected sensor fusion algorithm: EKF
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>2025-11-14 23:42:20 | INFO | Magnetometer noise: 10.0 nT
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>2025-11-14 23:42:20 | INFO | Sunsensor noise: 0.2 deg
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>2025-11-14 23:42:20 | INFO | Sensor on time: 2 seconds, actuator on time: 8 seconds
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>2025-11-14 23:42:20 | INFO | Iteration 0 of 10000
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>2025-11-14 23:42:25 | INFO | Iteration 100 of 10000
</span></code></pre></div>
<p>This form means the code runs correctly.</p>
<h1 id="fundamentals">Fundamentals<a class="headerlink" href="#fundamentals" title="Permanent link">&para;</a></h1>
<p>Below the key theoretical concepts are briefly presented with usage examples and references to their application in simulation code. Since some functions and methods were prepared specifically for this repository, correct functioning requires initialization of base objects and parameters. This can be done with the following code (in most cases placed at the beginning):</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">spacecraft.satellite</span><span class="w"> </span><span class="kn">import</span> <span class="n">SatelliteImplementation</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">setup.initial_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">SimulationSetupReader</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">setup.two_line_element</span><span class="w"> </span><span class="kn">import</span> <span class="n">TwoLineElementReader</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">spacecraft.sensors</span><span class="w"> </span><span class="kn">import</span> <span class="n">MagnetometerImplementation</span><span class="p">,</span> <span class="n">SunsensorImplementation</span><span class="p">,</span> <span class="n">SensorFusionImplementation</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="n">setup</span> <span class="o">=</span> <span class="n">SimulationSetupReader</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;setup/initial_settings.json&#39;</span><span class="p">))</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="n">tle</span> <span class="o">=</span> <span class="n">TwoLineElementReader</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;setup/tle&#39;</span><span class="p">))</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="n">magnetometer</span> <span class="o">=</span> <span class="n">MagnetometerImplementation</span><span class="p">(</span><span class="n">setup</span><span class="p">)</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="n">sunsensor</span> <span class="o">=</span> <span class="n">SunsensorImplementation</span><span class="p">(</span><span class="n">setup</span><span class="p">)</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="n">sensor_fusion</span> <span class="o">=</span> <span class="n">SensorFusionImplementation</span><span class="p">(</span><span class="n">setup</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;triad&#39;</span><span class="p">,</span> <span class="s1">&#39;quest&#39;</span><span class="p">,</span> <span class="s1">&#39;ekf&#39;</span><span class="p">],</span> <span class="n">tr</span><span class="o">.</span><span class="n">euler_xyz_to_quaternion</span><span class="p">(</span><span class="n">setup</span><span class="o">.</span><span class="n">euler_angles</span><span class="p">))</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="n">satellite</span> <span class="o">=</span> <span class="n">SatelliteImplementation</span><span class="p">(</span><span class="n">setup</span><span class="p">,</span> <span class="n">tle</span><span class="p">,</span> <span class="n">magnetometer</span><span class="p">,</span> <span class="n">sunsensor</span><span class="p">,</span> <span class="n">sensor_fusion</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="orbit-and-environment">Orbit and Environment<a class="headerlink" href="#orbit-and-environment" title="Permanent link">&para;</a></h2>
<h3 id="julian-date-jd">Julian Date (JD)<a class="headerlink" href="#julian-date-jd" title="Permanent link">&para;</a></h3>
<p>The Julian Date is a frequently used time representation in astronomical computations and algorithms. It is the fraction representing the number of days since noon January 1, 4713 BC. For example, for UTC 2025-10-18 00:00:00.000 JD equals 2460966.5. Sometimes the Modified Julian Date (MJD) format is encountered, intended to simplify the fraction: MJD = JD − 2400000.5. For the above example it is 60966. The code uses the standard JD applied in the Skyfield library. It is passed as an argument to the propagator model and allows obtaining orbital parameters. Conversion is handled by a function returning current satellite time (simulation start time plus iteration count). With default settings using current time as start:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">core.utilities</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ut</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="n">time_satellite</span> <span class="o">=</span> <span class="n">satellite</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">date_time</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="n">satellite_julian_date</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">time_julian_date</span><span class="p">(</span><span class="n">satellite</span><span class="p">)</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Satellite time: </span><span class="si">{</span><span class="n">time_satellite</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Satellite Julian date: </span><span class="si">{</span><span class="n">satellite_julian_date</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Example output:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>Satellite time: 2025-10-22 13:25:41.386584
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>Satellite Julian date: &lt;Time tt=2460818.709556771&gt;
</span></code></pre></div>
<p>Note: Skyfield presents time in TT (Terrestrial Time). It differs from UTC by ΔT (leap seconds and drift). For IGRF this is negligible, but for precise conversions TT↔UTC should be considered.</p>
<h3 id="tle">TLE<a class="headerlink" href="#tle" title="Permanent link">&para;</a></h3>
<p>The most popular storage format for parameters of Earth-orbiting objects is the TLE (Two-Line Element Set), which consists of two lines where each character sequence has meaning. An example used in this repository (also under ADCS/setup/tle):</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>1 25544U 98067A 25143.20875603 .00008836 00000-0 16445-3 0 9994
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>2 25544 51.6382 70.8210 0002488 135.0606 10.4960 15.49676890511280
</span></code></pre></div>
<p>To load and extract data from TLE conveniently, code (two_line_element.py) was created. It allows retrieving individual elements by name or entire lines as strings. Meanings are briefly added in function descriptions. A good summary is available on Wikipedia (https://en.wikipedia.org/wiki/Two-line_element_set).</p>
<p>Initialize TLE to use it:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Two Line Element:</span><span class="se">\n</span><span class="si">{</span><span class="n">tle</span><span class="o">.</span><span class="n">line_1</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">tle</span><span class="o">.</span><span class="n">line_2</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Epoch Year: </span><span class="si">{</span><span class="n">tle</span><span class="o">.</span><span class="n">epoch_year</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Epoch Day: </span><span class="si">{</span><span class="n">tle</span><span class="o">.</span><span class="n">epoch_day</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Inclination: </span><span class="si">{</span><span class="n">tle</span><span class="o">.</span><span class="n">inclination</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Bstar Drag: </span><span class="si">{</span><span class="n">tle</span><span class="o">.</span><span class="n">bstar_drag</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Output:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>Two Line Element:
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>1 25544U 98067A 25143.20875603 .00008836 00000-0 16445-3 0 9994
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>2 25544 51.6382 70.8210 0002488 135.0606 10.4960 15.49676890511280
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>Epoch Year: 25
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>Epoch Day: 143.20875603
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>Inclination: 51.6382
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>Bstar Drag: 16445-3
</span></code></pre></div>
<p>Note the format: Bstar Drag “16445-3” must be interpreted as 0.16445e-3 (1.6445e-4).</p>
<h3 id="propagator">Propagator<a class="headerlink" href="#propagator" title="Permanent link">&para;</a></h3>
<p>The orbital propagator determines satellite position, velocity, and acceleration at a given moment. This simulation uses SGP4 (Simplified General Perturbations 4). It uses TLE data and requires periodic updates to limit growing errors. Implementation comes from Skyfield.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">skyfield.api</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">skyfield</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="n">satellite_model</span> <span class="o">=</span> <span class="n">skyfield</span><span class="o">.</span><span class="n">EarthSatellite</span><span class="p">(</span><span class="n">tle</span><span class="o">.</span><span class="n">line_1</span><span class="p">,</span> <span class="n">tle</span><span class="o">.</span><span class="n">line_2</span><span class="p">)</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="n">julian_date</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">time_julian_date</span><span class="p">(</span><span class="n">satellite</span><span class="p">)</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="n">position</span> <span class="o">=</span> <span class="n">satellite_model</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">julian_date</span><span class="p">)</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">km</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="n">velocity</span> <span class="o">=</span> <span class="n">satellite_model</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">julian_date</span><span class="p">)</span><span class="o">.</span><span class="n">velocity</span><span class="o">.</span><span class="n">km_per_s</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Position vector: </span><span class="si">{</span><span class="n">position</span><span class="si">}</span><span class="s2"> [km]&quot;</span><span class="p">)</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Velocity vector: </span><span class="si">{</span><span class="n">velocity</span><span class="si">}</span><span class="s2"> [km/s]&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Example output:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>Position vector: [-4107.48809952 -4489.58941621  3014.80595056] [km]
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>Velocity vector: [ 2.23875988 -5.3942253  -4.96501356] [km/s]
</span></code></pre></div>
<p>Position and velocity are primary results, but altitude above the WGS‑84 ellipsoid, geographic longitude and latitude can also be obtained. Skyfield results are in GCRS (inertial, aligned with ICRF at J2000); “ECI” is used as shorthand. If raw SGP4/TEME is used, transform to ECEF/ITRF (precession, nutation, sidereal time).</p>
<p>More: https://www.aero.iitb.ac.in/satelliteWiki/index.php/Orbit_Propagator</p>
<h3 id="low-earth-orbit-leo">Low Earth Orbit (LEO)<a class="headerlink" href="#low-earth-orbit-leo" title="Permanent link">&para;</a></h3>
<p>The region of space extending from Earth up to the Van Allen belts is referred to as Low Earth Orbit. In practice altitudes from about 200 km to 2000 km are considered. It is popular due to proximity and lower launch cost. Drawbacks include residual atmospheric drag (especially below ~300 km) and limited field of view. From an attitude determination and control perspective proximity to Earth offers another advantage: relatively strong magnetic field usable by sensors and actuators.</p>
<h3 id="earths-magnetic-field">Earth’s Magnetic Field<a class="headerlink" href="#earths-magnetic-field" title="Permanent link">&para;</a></h3>
<p>Earth naturally generates a magnetic field internally and around itself. Its shape approximates a dipole slightly tilted from the rotation axis. It has static and variable components (the latter typically 1–5%). Local anomalies exist. Thanks to observations accurate models such as IGRF (International Geomagnetic Reference Field) were developed. This simulation uses pyIGRF. It requires geographic coordinates and date as a decimal fraction (time from start of year expressed as a fraction, e.g. 2024.25 as first quarter).</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pyIGRF</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">core.utilities</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ut</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">datetime</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="n">lat</span> <span class="o">=</span> <span class="n">satellite</span><span class="o">.</span><span class="n">latitude</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="n">lon</span> <span class="o">=</span> <span class="n">satellite</span><span class="o">.</span><span class="n">longitude</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="n">alt_km</span> <span class="o">=</span> <span class="n">satellite</span><span class="o">.</span><span class="n">altitude</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="n">julian_date</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">time_julian_date</span><span class="p">(</span><span class="n">satellite</span><span class="p">)</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="n">dt</span> <span class="o">=</span> <span class="n">julian_date</span><span class="o">.</span><span class="n">utc_datetime</span><span class="p">()</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="n">end</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="n">decimal_year</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">year</span> <span class="o">+</span> <span class="p">(</span><span class="n">dt</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">/</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="c1"># IGRF returns NED components in nT</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="n">d</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">b_n</span><span class="p">,</span> <span class="n">b_e</span><span class="p">,</span> <span class="n">b_d</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">pyIGRF</span><span class="o">.</span><span class="n">igrf_value</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">alt_km</span><span class="p">,</span> <span class="n">decimal_year</span><span class="p">)</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;IGRF Magnetic Field NED: B_n=</span><span class="si">{</span><span class="n">b_n</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, B_e=</span><span class="si">{</span><span class="n">b_e</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, B_d=</span><span class="si">{</span><span class="n">b_d</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> [nT]&quot;</span><span class="p">)</span>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;IGRF Magnetic Field Magnitude: F=</span><span class="si">{</span><span class="n">f</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> [nT]&quot;</span><span class="p">)</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;IGRF Declination: D=</span><span class="si">{</span><span class="n">d</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> [deg], Inclination: i=</span><span class="si">{</span><span class="n">i</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> [deg], Horizontal Intensity: H=</span><span class="si">{</span><span class="n">h</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> [nT]&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Output:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>IGRF Magnetic Field NED: B_n=20470.13, B_e=-760.77, B_d=29507.77 [nT]
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>IGRF Magnetic Field Magnitude: F=35920.94 [nT]
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>IGRF Declination: D=-2.13 [deg], Inclination: i=55.23 [deg], Horizontal Intensity: H=20484.26 [nT]
</span></code></pre></div>
<p>The library returns vector and resultant field value, declination, inclination, and horizontal intensity. For ADCS only the vector matters. Note pyIGRF returns NED (North-East-Down); transform before further work (see transformations chapter).</p>
<p>More: https://geomag.bgs.ac.uk/research/modelling/IGRF</p>
<h3 id="sun-position">Sun Position<a class="headerlink" href="#sun-position" title="Permanent link">&para;</a></h3>
<p>The Sun and its position are another element useful for attitude determination in space due to well-predictable position relative to Earth. Considering the enormous distance between both bodies, for simple calculations on low orbits Earth-centric description suffices, ignoring satellite orbital motion. A good step-by-step description can be found on Wikipedia: https://en.wikipedia.org/wiki/Position_of_the_Sun</p>
<p>Here Skyfield is used to compute Sun vector relative to Earth for a given Julian Date.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">skyfield.api</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">skyfield</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">core.utilities</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ut</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="c1"># load ephemeris data for sun and earth</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="n">eph</span> <span class="o">=</span> <span class="n">skyfield</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;de421.bsp&#39;</span><span class="p">)</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="n">sun</span> <span class="o">=</span> <span class="n">eph</span><span class="p">[</span><span class="s1">&#39;sun&#39;</span><span class="p">]</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="n">earth</span> <span class="o">=</span> <span class="n">eph</span><span class="p">[</span><span class="s1">&#39;earth&#39;</span><span class="p">]</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="n">julian_date</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">time_julian_date</span><span class="p">(</span><span class="n">satellite</span><span class="p">)</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="n">sun_position_eci</span> <span class="o">=</span> <span class="n">earth</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">julian_date</span><span class="p">)</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">sun</span><span class="p">)</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">km</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sun Position ECI: </span><span class="si">{</span><span class="n">sun_position_eci</span><span class="si">}</span><span class="s2"> [km]&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Output:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>Sun Position ECI: [7.11550861e+07 1.22678186e+08 5.31785009e+07] [km]
</span></code></pre></div>
<p>Returned Sun vector is in ICRF (treated as “ECI” for simplicity).</p>
<h2 id="attitude-and-transformations">Attitude and Transformations<a class="headerlink" href="#attitude-and-transformations" title="Permanent link">&para;</a></h2>
<h3 id="reference-frames">Reference Frames<a class="headerlink" href="#reference-frames" title="Permanent link">&para;</a></h3>
<p>To determine spatial attitude frames must be established. Due to diversity of objects and applications in space a range of different frames is used. Below several appearing in this repository are described.</p>
<ul>
<li>Satellite Body (SB) – frame rigidly attached to the spacecraft, moving and rotating with it. In this simplified simulation it is tied to sensors; measurements are expressed in it. In practice a navigation base may be defined and sensors may have local frames.</li>
<li>Earth-Centered Inertial (ECI) – Earth-centered frame fixed relative to distant stars. Z axis toward North Pole, X along intersection of equator and ecliptic, Y completing orthonormal basis. Origin at Earth’s center of mass. Practically GCRS (ICRF-aligned) often used.</li>
<li>Earth-Centered Earth-Fixed (ECEF) – rotating with Earth. Z along Earth’s rotation axis, X intersection of equator and 0° meridian, Y intersection of equator and 90°E meridian.</li>
<li>East-North-Up / North-East-Down (ENU / NED) – two variants of a local frame near Earth. First two axes (X and Y) oriented along east or north direction; main difference lies in Z, pointing away from Earth (Up) or toward Earth (Down). ENU: x=East, y=North, z=Up. NED: x=North, y=East, z=Down. Appears for magnetic field (IGRF models return values in this frame).</li>
<li>International Celestial Reference Frame (ICRF) – inertial frame with origin at Solar System barycenter; used for ephemerides. For near-Earth orbits treated as “ECI”.</li>
<li>Longitude / Latitude / Altitude (LLA) – geodetic form relative to WGS‑84.</li>
</ul>
<h3 id="attitude-representation-and-rotation">Attitude Representation and Rotation<a class="headerlink" href="#attitude-representation-and-rotation" title="Permanent link">&para;</a></h3>
<p>For an ADCS system on low Earth orbit the most important frames are ECI and SBF where the former is reference and the latter tied to onboard measurements. Transition between them consists of translation and rotation. Translation is provided by the propagator returning satellite position at a moment. Finding the rotation representing spatial attitude is ADCS task achieved using sensor measurements and comparing them with reference. Attitude can be represented several ways:</p>
<ul>
<li>Euler Angles – three successive rotations about chosen axes. Intuitive (popular e.g. in aviation) but limited for space applications (e.g. gimbal lock). In code used for initialization and visualization.</li>
<li>Quaternion – q = [u_x sin(α/2), u_y sin(α/2), u_z sin(α/2), cos(α/2)]. Four-element rotation representation consisting of vector and scalar part. Vector part corresponds to rotation axis u, scalar part is cos(α/2). Quaternion is compact, convenient, numerically stable, and free of Euler angle singularities.</li>
<li>Rotation Matrix – most basic form: a matrix that multiplies the original vector to obtain the target vector.</li>
</ul>
<p>Rotation handling can be tricky and error-prone; to minimize risk the reliable scipy library is used for most operations. Below an example of a simple rotation using Euler angles and quaternion:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">scipy.spatial.transform</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">R</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="n">euler_angles_init</span> <span class="o">=</span> <span class="p">[</span><span class="mf">90.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>  <span class="c1"># degrees</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="n">quaternion_init</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.70710678</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.70710678</span><span class="p">]</span>  <span class="c1"># [x, y, z, w]</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="n">reproduced_quaternion</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">Rotation</span><span class="o">.</span><span class="n">from_euler</span><span class="p">(</span><span class="s1">&#39;xyz&#39;</span><span class="p">,</span> <span class="n">euler_angles_init</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">as_quat</span><span class="p">()</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="n">reproduced_euler_angles</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">Rotation</span><span class="o">.</span><span class="n">from_quat</span><span class="p">(</span><span class="n">quaternion_init</span><span class="p">)</span><span class="o">.</span><span class="n">as_euler</span><span class="p">(</span><span class="s1">&#39;xyz&#39;</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initial Euler Angles: </span><span class="si">{</span><span class="n">euler_angles_init</span><span class="si">}</span><span class="s2"> [deg]&quot;</span><span class="p">)</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initial Quaternion: </span><span class="si">{</span><span class="n">quaternion_init</span><span class="si">}</span><span class="s2"> [x, y, z, w]&quot;</span><span class="p">)</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reproduced Quaternion from Euler Angles: </span><span class="si">{</span><span class="n">reproduced_quaternion</span><span class="si">}</span><span class="s2"> [x, y, z, w]&quot;</span><span class="p">)</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reproduced Euler Angles from Quaternion: </span><span class="si">{</span><span class="n">reproduced_euler_angles</span><span class="si">}</span><span class="s2"> [deg]&quot;</span><span class="p">)</span>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a><span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>
</span><span id="__span-17-16"><a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a><span class="n">rotation</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">Rotation</span><span class="o">.</span><span class="n">from_quat</span><span class="p">(</span><span class="n">quaternion_init</span><span class="p">)</span>
</span><span id="__span-17-17"><a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a><span class="n">v2</span> <span class="o">=</span> <span class="n">rotation</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
</span><span id="__span-17-18"><a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a>
</span><span id="__span-17-19"><a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Original Vector: </span><span class="si">{</span><span class="n">v1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-17-20"><a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Rotated Vector: </span><span class="si">{</span><span class="n">v2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Output:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>Initial Euler Angles: [90.0, 0.0, 0.0] [deg]
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>Initial Quaternion: [0.70710678 0.         0.         0.70710678] [x, y, z, w]
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>Reproduced Quaternion from Euler Angles: [0.70710678 0.         0.         0.70710678] [x, y, z, w]
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>Reproduced Euler Angles from Quaternion: [90.  0.  0.] [deg]
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>Original Vector: [0.0, 1.0, 0.0]
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>Rotated Vector: [0. 0. 1.]
</span></code></pre></div>
<p>Note: after each update the quaternion should be normalized to limit numerical drift.</p>
<p>Similarly functions for transitioning between frames were created (core/transformations.py). Below five basic implemented conversions:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">core.transformations</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">tr</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">core.utilities</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ut</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="n">julian_date</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">time_julian_date</span><span class="p">(</span><span class="n">satellite</span><span class="p">)</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="n">quaternion_init</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.70710678</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.70710678</span><span class="p">]</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="n">enu_ecef</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">enu_to_ecef</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">longitude</span><span class="p">)</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="n">ned_ecef</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">ned_to_ecef</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">longitude</span><span class="p">)</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="n">ecef_eci</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">ecef_to_eci</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">julian_date</span><span class="p">)</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="n">eci_sbf</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">eci_to_sbf</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">quaternion_init</span><span class="p">)</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="n">sbf_eci</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">sbf_to_eci</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">quaternion_init</span><span class="p">)</span>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Original Vector: </span><span class="si">{</span><span class="n">v1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ENU to ECEF: </span><span class="si">{</span><span class="n">enu_ecef</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NED to ECEF: </span><span class="si">{</span><span class="n">ned_ecef</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-19-17"><a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ECEF to ECI: </span><span class="si">{</span><span class="n">ecef_eci</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-19-18"><a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ECI to SBF: </span><span class="si">{</span><span class="n">eci_sbf</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-19-19"><a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SBF to ECI: </span><span class="si">{</span><span class="n">sbf_eci</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Output:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>Original Vector: [0.0, 1.0, 0.0]
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>ENU to ECEF: [ 0.02791803  0.44449952 -0.89534393]
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>NED to ECEF: [ 0.99961022 -0.01241439  0.02500598]
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>ECEF to ECI: [0.69189531 0.72199784 0.        ]
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>ECI to SBF: [0. 0. 1.]
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>SBF to ECI: [ 0.  0. -1.]
</span></code></pre></div>
<h2 id="sensors-and-active-elements">Sensors and Active Elements<a class="headerlink" href="#sensors-and-active-elements" title="Permanent link">&para;</a></h2>
<h3 id="magnetometers">Magnetometers<a class="headerlink" href="#magnetometers" title="Permanent link">&para;</a></h3>
<p>A magnetometer measures the magnetic field. There are many types of magnetometers with different capabilities and sizes depending on application and mission character. For small satellites on low Earth orbit three-axis magnetometers are used. Often they are fluxgate (core saturation) or magnetoresistive devices. Miniaturization yields small, light, low-power units.</p>
<p>In this simulation the magnetometer was chosen as the main sensor. Magnetometer simulation uses magnetic field from the IGRF model. To obtain a value equivalent to an actual onboard measurement, the vector must be transformed to the SBF frame. Noise can be added using a maximum absolute deviation.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>mag_field_sbf += noise_vector
</span></code></pre></div>
<p>where noise_vector = &lt;-x: +x&gt;.</p>
<p>Noise settings are in initial_settings.json:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>&quot;Magnetometer&quot;:
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>{
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>  &quot;Noise&quot;: true,
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>  &quot;AbsoluteNoise&quot;: 10,
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>  &quot;UnitInfo&quot;: &quot;nT&quot;
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>},
</span></code></pre></div>
<p>Noise model is simplified (uniform ±A per axis). Real sensors more often exhibit Gaussian distribution + bias + drift.</p>
<h3 id="sun-sensor">Sun Sensor<a class="headerlink" href="#sun-sensor" title="Permanent link">&para;</a></h3>
<p>Sun sensors enable determination of the Sun vector (direction of the Sun relative to the satellite). Depending on role they may be highly accurate array sensors or simpler multi-photodiode units on exterior panels. The latter is common on small satellites. Due to simplicity they complement other sensors well. In this case typically treated as second sensor.</p>
<p>Relative Sun position is obtained using Skyfield (as described earlier), then transformed to SB frame for an equivalent onboard measurement vector. It can then be noisified. Sun sensor noise is implemented as rotation of the vector around a random axis by a random angle in the specified range.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>sun_vector = raw_sun_vector * R
</span></code></pre></div>
<p>where R is a rotation matrix representing rotation by an angle from &lt;-x: +x&gt;.</p>
<p>Noise settings in initial_settings.json:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>&quot;SunSensor&quot;:
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>{
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>  &quot;Noise&quot;: true,
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>  &quot;AngularNoise&quot;: 0.2,
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>  &quot;UnitInfo&quot;: &quot;deg&quot;
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>},
</span></code></pre></div>
<h3 id="gyroscopes">Gyroscopes<a class="headerlink" href="#gyroscopes" title="Permanent link">&para;</a></h3>
<p>A gyroscope measures angular velocity directly (not angular acceleration). Classically it is a large rotating mechanical device using conservation of angular momentum. In space missions MEMS gyros are typically used—devices with small vibrating elements measuring rotation via Coriolis force. They are small and inexpensive, but have limited accuracy and accumulating drift. In this simulation angular velocity can be determined from attitude difference between iterations: divide by Δt and preferably use quaternion derivative (ω = 2 q̇ ⊗ q⁻¹). Drift is not modeled in detail.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>&quot;Gyroscope&quot;:
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>{
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>  &quot;Bias&quot;: [0.0, 0.0, 0.0],
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>  &quot;ProcessNoise&quot;: [1e-8, 1e-8, 1e-8],
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>  &quot;UnitInfo&quot;: &quot;deg/s&quot;
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>},
</span></code></pre></div>
<h3 id="sensor-fusion">Sensor Fusion<a class="headerlink" href="#sensor-fusion" title="Permanent link">&para;</a></h3>
<p>A basic problem in attitude determination is combining measurements from two or more sources to obtain a single more reliable and accurate estimate. Using multiple types balances potential shortcomings when one would perform worse. Specialized algorithms process measurements. In space missions three are often distinguished:</p>
<ul>
<li>TRIAD (Three-Axis Attitude Determination) – simplest. Processes measurements from only two sensors knowing vectors in satellite frame and their inertial counterparts. Finds rotation matrix by constructing triads and relative arrangement.</li>
<li>QUEST (QUaternion ESTimator) – solves Wahba’s problem for two or more vectors. Returns a quaternion (eigenvector of matrix built from measurement data). Optionally assigns weights to measurements.</li>
<li>EKF (Extended Kalman Filter) – more advanced nonlinear state estimation. Iteratively uses dynamic model to predict future state and sensor measurements to correct it. For ADCS it uses measurement pairs plus angular velocity and previous attitude. EKF estimates should be noticeably more accurate than TRIAD and QUEST. Below an example obtaining quaternion for two vectors rotated by 90 degrees at zero angular velocity.</li>
</ul>
<div class="language-python highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="c1"># two reference vectors</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="n">v1_i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="n">v2_i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.70710678</span><span class="p">,</span> <span class="mf">0.70710678</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="c1"># two measured vectors with some noise rotated by 90 deg around z axis</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="n">v1_b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="n">v2_b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.70710678</span><span class="p">,</span> <span class="mf">0.70710678</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="n">q_reference</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.70710678</span><span class="p">,</span> <span class="mf">0.70710678</span><span class="p">])</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="c1"># typically the first vector should be the most accurate one</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="n">v_i_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">v1_i</span><span class="p">,</span> <span class="n">v2_i</span><span class="p">]</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="n">v_b_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">v1_b</span><span class="p">,</span> <span class="n">v2_b</span><span class="p">]</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a><span class="c1"># normalize before estimation (TRIAD/QUEST/EKF)</span>
</span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a><span class="n">v_i_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">v_i_list</span><span class="p">]</span>
</span><span id="__span-26-19"><a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a><span class="n">v_b_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">v_b_list</span><span class="p">]</span>
</span><span id="__span-26-20"><a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a>
</span><span id="__span-26-21"><a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a><span class="n">q_triad</span> <span class="o">=</span> <span class="n">sensor_fusion</span><span class="o">.</span><span class="n">triad</span><span class="p">(</span><span class="n">v_b_list</span><span class="p">,</span> <span class="n">v_i_list</span><span class="p">)</span>
</span><span id="__span-26-22"><a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a><span class="n">q_quest</span> <span class="o">=</span> <span class="n">sensor_fusion</span><span class="o">.</span><span class="n">quest</span><span class="p">(</span><span class="n">v_b_list</span><span class="p">,</span> <span class="n">v_i_list</span><span class="p">)</span>
</span><span id="__span-26-23"><a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a><span class="n">q_ekf</span> <span class="o">=</span> <span class="n">sensor_fusion</span><span class="o">.</span><span class="n">ekf</span><span class="p">(</span><span class="n">v_b_list</span><span class="p">,</span> <span class="n">v_i_list</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">q_reference</span><span class="p">)</span>
</span><span id="__span-26-24"><a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a>
</span><span id="__span-26-25"><a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a><span class="c1"># signs may differ between algorithms, but represent the same rotation q = -q</span>
</span><span id="__span-26-26"><a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reference quaternion: </span><span class="si">{</span><span class="n">q_reference</span><span class="si">}</span><span class="s2"> [x, y, z, w]&quot;</span><span class="p">)</span>
</span><span id="__span-26-27"><a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;TRIAD Quaternion: </span><span class="si">{</span><span class="n">q_triad</span><span class="si">}</span><span class="s2"> [x, y, z, w]&quot;</span><span class="p">)</span>
</span><span id="__span-26-28"><a id="__codelineno-26-28" name="__codelineno-26-28" href="#__codelineno-26-28"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;QUEST Quaternion: </span><span class="si">{</span><span class="n">q_quest</span><span class="si">}</span><span class="s2"> [x, y, z, w]&quot;</span><span class="p">)</span>
</span><span id="__span-26-29"><a id="__codelineno-26-29" name="__codelineno-26-29" href="#__codelineno-26-29"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;EKF Quaternion: </span><span class="si">{</span><span class="n">q_ekf</span><span class="si">}</span><span class="s2"> [x, y, z, w]&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Output:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>Reference quaternion: [0.         0.         0.70710678 0.70710678] [x, y, z, w]
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>TRIAD Quaternion: [-0.01693025 -0.01254686  0.7105929   0.70328776] [x, y, z, w]
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>QUEST Quaternion: [-0.01691007 -0.01257405  0.70946175  0.70442883] [x, y, z, w]
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>EKF Quaternion: [-0.00855144 -0.00616122  0.70900606  0.70512362] [x, y, z, w]
</span></code></pre></div>
<p>QUEST estimate is slightly better than TRIAD, but EKF is closest (result differs due to random noise). Selection of fusion algorithm and parameters is set in initial_settings.json (TRIAD has no extra parameters).</p>
<h3 id="electromagnetic-coils">Electromagnetic Coils<a class="headerlink" href="#electromagnetic-coils" title="Permanent link">&para;</a></h3>
<p>Sensors provide reliable information about satellite dynamics and attitude; active elements use it for control consistent with mission profile. Electromagnetic coils (magnetorquers) are basic control elements for small satellites on low Earth orbit. Most often three-axis coil assemblies on magnetic or air cores. Air-core assumed here (easier integration).</p>
<p>Operation basis: a coil with current generates magnetic dipole. Interacting with Earth’s magnetic field produces a torque:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>τ = m × B
</span></code></pre></div>
<p>Units: m [A·m²], B [T], τ [N·m].</p>
<p>Control is limited by locally weak field and geometry: when required moment is parallel to B, m × B ≈ 0 and control becomes ineffective.</p>
<p>Parameters in initial_settings.json:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nt">&quot;Magnetorquer&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="w">  </span><span class="nt">&quot;Coils&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="w">  </span><span class="nt">&quot;MaxCurrent&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="w">  </span><span class="nt">&quot;CoilArea&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">90</span><span class="p">,</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">  </span><span class="nt">&quot;SafetyFactor&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w">  </span><span class="nt">&quot;AlphaCap&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w">  </span><span class="nt">&quot;UnitInfo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;coils, cm^2, A, unitless, deg/s2&quot;</span>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="p">}</span>
</span></code></pre></div>
<p>Note: CoilArea in cm² converted to m² (×1e‑4).</p>
<h1 id="simulation">Simulation<a class="headerlink" href="#simulation" title="Permanent link">&para;</a></h1>
<p>These components form a model enabling simulation of a small satellite on Earth orbits.</p>
<h2 id="input-settings">Input Settings<a class="headerlink" href="#input-settings" title="Permanent link">&para;</a></h2>
<p>To simplify management of all parameters affecting simulation flow they were placed in a JSON file and initial_settings.py created to manage it. This allows control over each stage without editing underlying code. Multiple variants can be created since the JSON path is passed as an input parameter rather than hard-coded. Entire configuration is grouped like a Python dict with five top-level keys and more detailed nested ones. An informational unit entry appears for parameters (not processed).</p>
<ul>
<li>Simulation – basic simulation parameters such as physical constants, iteration control, start date.</li>
<li>Satellite – parameters describing the satellite: mass, inertia, initial attitude.</li>
<li>Sensors – parameters related to sensors and measurements; includes sensor settings and fusion algorithm parameters.</li>
<li>Actuators – parameters of active elements (here only coil): number of turns, cross-sectional area, safety factor, acceleration cap.</li>
<li>Controls – parameters related to satellite control: fusion algorithm choice, detumbling and pointing algorithm settings, mode switching.</li>
</ul>
<p>initial_settings.py is prepared for current structure. Missing required keys raise errors, but additional entries can be added. If added at leaf level they are simply appended. Adding a unit is optional. Example:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>&quot;Magnetorquer&quot;:
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>{
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>  &quot;Coils&quot;: 200,
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>  &quot;MaxCurrent&quot;: 0.2,
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>  &quot;CoilArea&quot;: 90,
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>  &quot;SafetyFactor&quot;: 0.9,
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>  &quot;AlphaCap&quot;: 0.5,
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>  &quot;WireDia&quot;: 0.8,
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>  &quot;UnitInfo&quot;: &quot;coils, cm^2, A, unitless, deg/s2, mm&quot;
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>}
</span></code></pre></div>
<p>Then in the defined dict it appears as a key:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>setup.magnetorquer_params[&quot;WireDia&quot;]
</span></code></pre></div>
<p>If an entry is added elsewhere it goes to other parameters stored in self.other_parameters:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>{
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>  &quot;Simulation&quot;: { &quot;PlanetConst&quot;: ... },
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>  &quot;SomeOtherData&quot;: {
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>    &quot;A&quot;: 2,
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>    &quot;B&quot;: 4
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>  }
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>}
</span></code></pre></div>
<p>Loaded identically:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>data_dict = setup.other_parameters[&quot;SomeOtherData&quot;]
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>A = data_dict[&quot;A&quot;]
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>B = data_dict[&quot;B&quot;]
</span></code></pre></div>
<h2 id="satellite-parameters">Satellite Parameters<a class="headerlink" href="#satellite-parameters" title="Permanent link">&para;</a></h2>
<p>To simplify satellite operations it is treated as an object composed of components and key describing parameters are defined as properties in satellite.py. Note initialization:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>satellite = SatelliteImplementation(setup, tle, magnetometer, sunsensor, sensor_fusion)
</span></code></pre></div>
<p>So elements affecting satellite state are input data, TLE, magnetometer, Sun sensor, and fusion algorithm. Both constant parameters and updating ones describing current state can be accessed. Predefined properties appear as hints in editor and their description can be shown quickly. Example parameters:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>print(satellite.angular_velocity)
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>print(satellite.inertia_matrix)
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>print(satellite.magnetic_field)
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>print(satellite.torque)
</span></code></pre></div>
<p>Output:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>[  8. -14.  11.]
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>[[0.002 0.    0.   ]
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a> [0.    0.002 0.   ]
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a> [0.    0.    0.002]] (array([-12117.938582  , -12371.50694404, -31464.45657624]), array([-12121.11401262, -12375.32291477, -31468.13563725]))
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>[0. 0. 0.]
</span></code></pre></div>
<h2 id="algorithms">Algorithms<a class="headerlink" href="#algorithms" title="Permanent link">&para;</a></h2>
<p>Satellite behavior is based on implemented control algorithms. Their definition depends on mission character, available sensors, and actuators. Three basic states for satellites: detumbling (reducing rotation), pointing (target alignment), and off state. Transitions defined by achieving certain criteria and found in initial_settings.json.</p>
<h3 id="detumbling-b-dot">Detumbling (B-dot)<a class="headerlink" href="#detumbling-b-dot" title="Permanent link">&para;</a></h3>
<p>Reducing angular velocity is usually the first and most important control task. A deployed satellite often reaches orbit rotating relatively fast uncontrollably. To proceed to mission operations spatial attitude must be stabilized by slowing to a threshold. Bringing and maintaining sufficiently low rotation is detumbling’s task. For the assumed use of only electromagnetic coils in this project it is implemented via B-dot. Its name and operation relate to magnetic field derivative. Change rate of measured field is proportional to angular velocity components. Practically generated dipole must oppose rotation direction and be scaled by a gain.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>m = -k * dB/dt
</span></code></pre></div>
<p>There are several modifications helpful in certain cases. For an example 1U satellite differences are small. Below variants:</p>
<ul>
<li>Modified B-dot – does not rely on field derivative but directly on measured angular velocity. Less sensitive to field perturbations but requires angular velocity source.</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>m = -k (ω × B)
</span></code></pre></div>
<ul>
<li>Proportional B-dot – adds damping term based also on angular velocity. Can stabilize under changing field but if too strong may cause oscillations or destabilize at low speeds.</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>m = -k * dB/dt - k_p * ω
</span></code></pre></div>
<ul>
<li>Speed adaptive – same principle but gain depends on current angular velocity relative to a reference threshold. Above increased, below decreased. Speeds initial reduction but smooths controller later; may hinder damping at very low speeds.</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>k = k * (|ω|/ω_ref)^a
</span></code></pre></div>
<ul>
<li>Field adaptive – also modifies gain only. Depends on absolute magnetic field value relative to a reference (often near Earth average ~45000 nT). Helps mitigate orbital variation influence: increases gain when field weakens, decreases when it strengthens.</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>k = k * (B_ref/|B|)^b
</span></code></pre></div>
<p>Variants can combine. In most cases basic B-dot suffices. Algorithm is simple and reliable; for a small satellite it should reduce even large speeds quickly; time spans from under one hour to a few (simulation time) depending on initial conditions. Resulting angular velocity plot should smoothly converge to 0 resembling 1/x. If oscillations, direction changes, or instability are observed verify parameters.</p>
<ul>
<li>Gain – primary scaling converting derivative to sufficiently large dipole within coil capabilities. For example 1U values between 1000 and 4000 are sufficient; larger satellites can increase accordingly. Monitor coil load: if at max for long periods reduce gain; if very low for long periods increase. Auxiliary parameter: speed drop—too slow suggests gain too small.</li>
<li>Proportional gain – auxiliary; value should remain small. Considering direct combination with angular velocity in radians use values between 0.05 and 0.6.</li>
</ul>
<p>Satellite mass, inertia matrix, and coil parameters must be considered; though not in algorithm they are key for converting dipole to torque.</p>
<h3 id="pointing-b-cross">Pointing (B-cross)<a class="headerlink" href="#pointing-b-cross" title="Permanent link">&para;</a></h3>
<p>WARNING: This element remains under development and is not fully stable.</p>
<p>Pointing orients a given satellite face toward a target. For near-Earth objects typically Earth (e.g. camera) or Sun (e.g. solar panels). One algorithm usable with coils is B-cross. It relies on cross products minimizing angle between two vectors (target and current). Basic version has alignment and damping components:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>m = m_align + m_damp = k_a (error_vector × B) + k_d (ω × B)
</span></code></pre></div>
<p>A normalized variant relative to magnetic field is often used for stability; it changes gain magnitudes:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>m = m_align + m_damp = k_a (error_vector × B)/||B||^2 + k_d (ω × B)/||B||^2
</span></code></pre></div>
<p>Using only coils brings difficulties: sensitivity to local field variation, inability to generate moment when component is parallel, gain tuning trouble, limited precise control. Thus algorithm is used for initial alignment or coarse pointing.</p>
<h3 id="computing-angular-acceleration">Computing Angular Acceleration<a class="headerlink" href="#computing-angular-acceleration" title="Permanent link">&para;</a></h3>
<p>Theoretical magnetic dipole from coils is first step to desired angular acceleration. First convert components to required coil current considering turns and cross-sectional area:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>i = m / (n_coils * A_coil)
</span></code></pre></div>
<p>A in m² (from RodArea_cm2 × 1e‑4). Torque τ equals sum of magnetic torque and disturbance torques:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>τ_total = τ_mag + τ_bias
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>τ_mag = m × B
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>α = I^{-1} ( τ_total − ω × (I ω) )
</span></code></pre></div>
<p>where:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>coriolis = ω × (I * w)
</span></code></pre></div>
<p>After obtaining acceleration apply caps to reduce destabilization from abrupt spikes. Scale current accordingly.</p>
<h3 id="mode-switching">Mode Switching<a class="headerlink" href="#mode-switching" title="Permanent link">&para;</a></h3>
<p>Each mode has defined start and end parameters. Transitions are automatic and defined in initial_settings.json:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>&quot;ModeManagement&quot;:
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>{
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>  &quot;DetumblingOff&quot;: 0.5,
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>  &quot;DetumblingOn&quot;: 1.0,
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>  &quot;PointingOff&quot;: 10.0,
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a>  &quot;PointingOn&quot;: 12.0,
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a>  &quot;PointingDwellTime&quot;: 90,
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a>  &quot;UnitInfo&quot;: &quot;deg/s, deg, deg, deg, s&quot;
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a>}
</span></code></pre></div>
<p>For detumbling key is angular speed; for pointing maintaining angular error within bounds for dwell time. Thresholds have hysteresis: PointingOff &lt; PointingOn and DetumblingOff &lt; DetumblingOn to avoid frequent toggling.</p>
<h1 id="simulation-progress-and-analysis">Simulation Progress and Analysis<a class="headerlink" href="#simulation-progress-and-analysis" title="Permanent link">&para;</a></h1>
<p>In a standard situation simulation starts with higher angular velocity reduced by detumbling, then pointing (B-cross) and off state alternate. If pointing causes excessive spin-up, detumbling restarts. Full cycle typically in several to tens of thousands of iterations. Pointing not fully finished and stable; unpredictable behavior may occur. Besides confirming some initial parameters the terminal usually shows only mode change info and iteration timer. While adding logs is convenient for temporary checks and development, to avoid clutter and simplify work without digging into functions, analysis tools were implemented: state vector and plotting.</p>
<h3 id="state-vector">State Vector<a class="headerlink" href="#state-vector" title="Permanent link">&para;</a></h3>
<p>The state vector is a table containing all possible data describing satellite state at given times: angular velocity, position, magnetic field measurements, Sun vector, torque, etc. Class design allows adding any value at any time. If not measured or computed during an iteration empty entries are filled with NaN. Code below shows registering values:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="n">satellite</span><span class="o">.</span><span class="n">state_vector</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>  <span class="c1"># without reset it would accumulate data from previous tests</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="n">satellite</span><span class="o">.</span><span class="n">state_vector</span><span class="o">.</span><span class="n">next_row</span><span class="p">()</span>  <span class="c1"># initialization and iterating row index</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="n">satellite</span><span class="o">.</span><span class="n">_state_vector</span><span class="o">.</span><span class="n">register_vector</span><span class="p">(</span><span class="s2">&quot;angular_velocity&quot;</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">angular_velocity</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">])</span>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="n">satellite</span><span class="o">.</span><span class="n">_state_vector</span><span class="o">.</span><span class="n">register_value</span><span class="p">(</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">latitude</span><span class="p">)</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a><span class="nb">print</span><span class="p">(</span><span class="n">satellite</span><span class="o">.</span><span class="n">_state_vector</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">())</span>
</span></code></pre></div>
<p>Output:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>angular_velocity_x angular_velocity_y angular_velocity_z latitude
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>0 2.0               -3.0               4.0                26.40241
</span></code></pre></div>
<p>If the first line satellite.state_vector.reset() is removed and code executed multiple times data begins accumulating. If a new parameter is registered mid-way earlier values are auto-filled:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="c1"># satellite.state_vector.reset()</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="n">satellite</span><span class="o">.</span><span class="n">state_vector</span><span class="o">.</span><span class="n">next_row</span><span class="p">()</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="n">satellite</span><span class="o">.</span><span class="n">_state_vector</span><span class="o">.</span><span class="n">register_vector</span><span class="p">(</span><span class="s2">&quot;angular_velocity&quot;</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">angular_velocity</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">])</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a><span class="n">satellite</span><span class="o">.</span><span class="n">_state_vector</span><span class="o">.</span><span class="n">register_value</span><span class="p">(</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">latitude</span><span class="p">)</span>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a><span class="n">satellite</span><span class="o">.</span><span class="n">_state_vector</span><span class="o">.</span><span class="n">register_value</span><span class="p">(</span><span class="s2">&quot;pointing_error&quot;</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">pointing_error_angle</span><span class="p">)</span>
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a><span class="nb">print</span><span class="p">(</span><span class="n">satellite</span><span class="o">.</span><span class="n">_state_vector</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">())</span>
</span></code></pre></div>
<p>Example:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>  angular_velocity_x angular_velocity_y angular_velocity_z latitude pointing_error
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>0 2.0                -3.0               4.0                26.40241 NaN
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a>1 2.0                -3.0               4.0                26.40241 NaN
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a>2 2.0                -3.0               4.0                26.40241 NaN
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a>3 2.0                -3.0               4.0                26.40241 0.0
</span><span id="__span-51-6"><a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a>4 2.0                -3.0               4.0                26.40241 0.0
</span></code></pre></div>
<p>To simplify basic table management utilities.py contains basic_state_vector() which records selected basic parameters each iteration. For full analysis save table to CSV:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="n">satellite</span><span class="o">.</span><span class="n">state_vector</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;simulation_state_vector.csv&#39;</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="plots">Plots<a class="headerlink" href="#plots" title="Permanent link">&para;</a></h3>
<p>Another helpful element: plots. Implemented in two variants. One uses matplotlib—popular tool enabling creation of many data representations, styling, and saving as images. The second uses plotly—a more advanced tool enabling interactive zoom and precise value readout in HTML or notebook window plus defining live plots (helpful during development). Both variants implemented similarly in visualizations.py as separate classes with templates for line, scatter, and 3D plots (orbit visualization). Using these templates ready functions for selected basic parameters were created. All collected in basic_plots() that generates and saves plots. Below example using templates:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>from visualizations.visualizations import MatplotlibPlots
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>from visualizations.visualizations import PlotlyPlots
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a>import numpy as np
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a>x = np.arange(0, 10, 0.1)
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a>y = np.sin(x)
</span><span id="__span-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a>
</span><span id="__span-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a>mpl = MatplotlibPlots(save=False, show=True)
</span><span id="__span-53-9"><a id="__codelineno-53-9" name="__codelineno-53-9" href="#__codelineno-53-9"></a>pp = PlotlyPlots(save=False, show=True)
</span><span id="__span-53-10"><a id="__codelineno-53-10" name="__codelineno-53-10" href="#__codelineno-53-10"></a>
</span><span id="__span-53-11"><a id="__codelineno-53-11" name="__codelineno-53-11" href="#__codelineno-53-11"></a>mpl.line_plot({&quot;Sine Wave&quot;: (x, y)}, &quot;Sine Function&quot;, &quot;X-axis&quot;, &quot;sin(x)&quot;, &quot;sine_wave_matplotlib&quot;)
</span><span id="__span-53-12"><a id="__codelineno-53-12" name="__codelineno-53-12" href="#__codelineno-53-12"></a>pp.line_plot({&quot;Sine Wave&quot;: (x, y)}, &quot;Sine Function&quot;, &quot;X-axis&quot;, &quot;sin(x)&quot;, &quot;sine_wave_plotly&quot;)
</span></code></pre></div>
<p>This code should display two plots. Below how to add live plotting with plotly. Full example in notebook version. Add at start:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="n">live_w</span> <span class="o">=</span> <span class="n">LivePlotlyLine</span><span class="p">(</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>  <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;wx&quot;</span><span class="p">,</span> <span class="s2">&quot;wy&quot;</span><span class="p">,</span> <span class="s2">&quot;wz&quot;</span><span class="p">,</span> <span class="s2">&quot;|w|&quot;</span><span class="p">],</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>  <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Angular velocity (live)&quot;</span><span class="p">,</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a>  <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Time (s)&quot;</span><span class="p">,</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a>  <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;deg/s&quot;</span><span class="p">,</span>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a>  <span class="n">window</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
</span><span id="__span-54-7"><a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a><span class="p">)</span>
</span></code></pre></div>
<p>Update each iteration:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="n">wx</span><span class="p">,</span> <span class="n">wy</span><span class="p">,</span> <span class="n">wz</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">angular_velocity</span><span class="p">)</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="n">wmag</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">wx</span><span class="o">*</span><span class="n">wx</span> <span class="o">+</span> <span class="n">wy</span><span class="o">*</span><span class="n">wy</span> <span class="o">+</span> <span class="n">wz</span><span class="o">*</span><span class="n">wz</span><span class="p">))</span>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="n">live_w</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="p">[</span><span class="n">wx</span><span class="p">,</span> <span class="n">wy</span><span class="p">,</span> <span class="n">wz</span><span class="p">,</span> <span class="n">wmag</span><span class="p">])</span>
</span></code></pre></div>
<p>Interactive plot shows below including defined number of points. Multiple live plots possible. For matplotlib plots a configuration class defines styling parameters.</p>
<h3 id="tests">Tests<a class="headerlink" href="#tests" title="Permanent link">&para;</a></h3>
<p>Since this repository is more scientific-engineering in nature, tests are not implemented in classical production sense. Their goal is facilitating editing, confirming operation of certain code elements, and ensuring fragments return values in expected shape—helpful for identifying potential errors introduced during editing. Run tests with:</p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="n">pytest</span>
</span></code></pre></div>
<p>Optionally clear terminal before running to improve readability.</p>
<p>Additionally Jupyter Notebook examples.ipynb contains usage examples of fragments described in text; correct execution also helps during development.</p>
<h1 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h1>
<p>The created code is a base for further modification and expansion of a simple ADCS system for a small satellite; modular architecture makes adding additional sensors (e.g. horizon sensor, star trackers, full IMU) and actuators (e.g. reaction wheels and hybrid electromagnetic coil) easier. Pointing mode (B‑cross) still requires refinement—stability, gain tuning, and switching logic. You are encouraged to use, modify, and draw inspiration from this repository for your own projects. If you notice an error or have an improvement suggestion, feel free to get in touch.</p>
<h2 id="materials">Materials<a class="headerlink" href="#materials" title="Permanent link">&para;</a></h2>
<p>Below are materials that were helpful at various stages of creating this simulation. Note that near some specific functions links to helpful resources directly related to them were added. This is not all used sources. For certain topics—especially mathematics, transformations, or code—forum threads proved invaluable. For strictly technical subjects English Wikipedia often offers good summaries. Language models (external chat and GitHub Copilot) were also used.</p>
<p>https://www.aero.iitb.acs/satelliteWiki/index.php/Main_Page
https://automaticaddison.com/extended-kalman-filter-ekf-with-python-code-example/
https://digitalcommons.usu.edu/smallsat/2019/all2019/49/
https://www.diva-portal.org/smash/get/diva2:1018210/FULLTEXT02.pdf
https://docs.advancednavigation.com/gnss-compass/Foundation%20Knowledge.htm
https://files.core.ac.uk/download/pdf/286701577.pdf
https://www.gov.br/inpe/pt-br/area-conhecimento/unidade-nordeste/conasat/documentacja/nano-satelites-pelo-mundo/aausat-3-aalborg-university-denmark/aausat-3-adcs-attitudedeterminationandcontrolsystem.pdf
https://magneticearth.org/pages/models.html
https://medium.com/@sasha_przybylski/the-math-behind-extended-kalman-filtering-0df981a87453
https://naif.jpl.nasa.gov/pub/naif/toolkit_docs/Tutorials/pdf/individual_docs/17_frames_and_coordinate_systems.pdf
https://quaternions.online/
https://probablydance.com/2017/08/05/intuitive-quaternions/
https://www.3dgep.com/understanding-quaternions/</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 16, 2025</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/arekdrabik" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:arek.drabik1453@gmail.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["content.code.copy", "navigation.tabs", "navigation.top", "search.highlight", "search.suggest"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>