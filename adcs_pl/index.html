
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://adcs-a-drabik.com/adcs_pl/">
      
      
        <link rel="prev" href="../adcs/">
      
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Podstawy teoretyczne (pl) - Small Satellite ADCS Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Space+Grotesk:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Space Grotesk";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#wprowadzenie" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Small Satellite ADCS Documentation" class="md-header__button md-logo" aria-label="Small Satellite ADCS Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Small Satellite ADCS Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Podstawy teoretyczne (pl)
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="deep-orange"  aria-label="Dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue-gray" data-md-color-accent="deep-purple"  aria-label="Light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/arekdrabik/ADCS" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Code documentation

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../adcs/" class="md-tabs__link">
        
  
  
    
  
  Theoretical background (eng)

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  Podstawy teoretyczne (pl)

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Small Satellite ADCS Documentation" class="md-nav__button md-logo" aria-label="Small Satellite ADCS Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Small Satellite ADCS Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/arekdrabik/ADCS" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code documentation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../adcs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Theoretical background (eng)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Podstawy teoretyczne (pl)
  

    
  </span>
  
  

      </a>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="wprowadzenie">Wprowadzenie<a class="headerlink" href="#wprowadzenie" title="Permanent link">&para;</a></h1>
<p>Poniższy kod wykonuje symulację ADCS (Attitude Determination and Control System) dla małego satelity (CubeSat). Odtwarza otoczenie na zadanej orbicie, parametry obiektu i wyznacza jego orientację oraz dynamikę (prędkość i przyspieszenie kątowe). Główne zadania to detumbling (B-dot) i pointing (B-cross). Zaimplementowano magnetometr, czujnik Słońca oraz algorytmy TRIAD, QUEST i EKF. Sterowanie realizują trzy cewki elektromagnetyczne.</p>
<p>Symulacja składa się z trzech głównych elementów:
 - Odtworzenie warunków orbitalnych i środowiskowych, w tym pola grawitacyjnego Ziemi, oporu atmosferycznego, pola magnetycznego oraz położenia Słońca.
 - Określenie orientacji i dynamiki satelity na podstawie pomiarów z czujników (magnetometr, czujnik Słońca) oraz algorytmów fuzji danych (TRIAD, QUEST, EKF).
 - Sterowanie satelitą w celu realizacji zadań detumblingu (wyhamowywania obrotów) i pointingu (ukierunkowania na Ziemię lub Słońce) przy użyciu cewek elektromagnetycznych.</p>
<h1 id="przygotowanie">Przygotowanie<a class="headerlink" href="#przygotowanie" title="Permanent link">&para;</a></h1>
<h2 id="instalacja">Instalacja<a class="headerlink" href="#instalacja" title="Permanent link">&para;</a></h2>
<p>Całość kodu stworzona jest w Pythonie i wykorzystuje dedykowane biblioteki zarówno do operacji matematycznych, jak i implementowania podstawowych modeli astronomicznych. Dalsza część zakłada posiadanie zainstalowanego Pythona (preferowany 3.13). Środowisko zarządzane jest przy pomocy Poetry. Zwięzłą instrukcję dotyczącą instalacji można znaleźć w ich dokumentacji (https://python-poetry.org/docs/). Jednym z podstawowych elementów projektu Poetry jest plik pyproject.toml znajdujący się w głównym folderze repozytorium. Definiuje on wymagane biblioteki oraz ich wersje. Co istotne, aby uzyskać pewność kompatybilności i działania, wersje bibliotek zostały zablokowane.</p>
<p>Aby zbudować środowisko należy wykonać następującą komendę:</p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">poetry</span> <span class="n">install</span>
</span></code></pre></div>
<p>Skorzystać ze środowiska można w różnoraki sposób.
- Wywołując poetry bezpośrednio (zalecane):</p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">poetry</span> <span class="n">run</span> <span class="n">python</span> <span class="n">adcs</span><span class="p">.</span><span class="n">py</span>
</span></code></pre></div>
<ul>
<li>Uruchamiając środowisko w terminalu:</li>
</ul>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">poetry</span> <span class="n">env</span> <span class="n">activate</span>  <span class="c"># zwróci spersonalizowaną komendę do uruchomienia środowiska</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="c"># przykład aktywacji środowiska (PowerShell):</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="p">&amp;</span> <span class="s2">&quot;C:\sciezka\do\env\Scripts\Activate.ps1&quot;</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="n">python</span> <span class="n">adcs</span><span class="p">.</span><span class="n">py</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="n">deactivate</span>
</span></code></pre></div>
<ul>
<li>Wybierając stworzone środowisko w edytorze kodu. Taki krok konieczny jest choćby w celu skorzystania z Jupyter Notebook.</li>
</ul>
<h2 id="struktura-projektu">Struktura projektu<a class="headerlink" href="#struktura-projektu" title="Permanent link">&para;</a></h2>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>ADCS/
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>├─ adcs.py
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>├─ mkdocs.yml
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>├─ pyproject.toml
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>├─ docs/
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>│  ├─ index.md
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>│  ├─ adcs.md
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>│  └─ adcs_pl.md
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>├─ core/
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>│  ├─ logger.py
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>│  ├─ state.py
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>│  ├─ transformations.py
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>│  └─ utilities.py
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>├─ spacecraft/
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>│  ├─ actuator.py
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>│  ├─ sensors.py
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>│  └─ satellite.py
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>├─ setup/
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>│  ├─ initial_settings.py
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>│  ├─ initial_settings.json
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>│  ├─ two_line_element.py
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>│  └─ tle
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>├─ templates/
</span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a>│  ├─ actuator_template.py
</span><span id="__span-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>│  ├─ sensor_template.py
</span><span id="__span-3-26"><a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a>│  ├─ satellite_template.py
</span><span id="__span-3-27"><a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a>│  ├─ two_line_element_template.py
</span><span id="__span-3-28"><a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a>│  └─ initial_settings_template.py
</span><span id="__span-3-29"><a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a>├─ visualizations/
</span><span id="__span-3-30"><a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a>│  └─ visualizations.py
</span><span id="__span-3-31"><a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a>└─ tests/
</span><span id="__span-3-32"><a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a>   ├─ conftest.py
</span><span id="__span-3-33"><a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a>   ├─ test_actuator.py
</span><span id="__span-3-34"><a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a>   ├─ test_sensors.py
</span><span id="__span-3-35"><a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a>   └─ test_transformations.py
</span></code></pre></div>
<p>Podstawą projektu jest folder spacecraft, gdzie umieszczone są podstawowe części kodu odpowiadające za systemy satelity.
- Skrypt satellite.py odpowiada za generalne zarządzanie i sterowanie poszczególnymi elementami, spinając całość w jeden obiekt, przy pomocy którego można zarządzać najważniejszymi parametrami satelity.
- Skrypt sensors.py odpowiada za całość kodu związanego z pomiarami, zarówno część symulującą środowisko do pomiaru, zaszumienie i przetwarzanie poszczególnymi algorytmi (TRIAD, QUEST, EKF).
- Skrypt actuator.py odpowiada z kolei za elementy czynne (w tym wypadku jedynie cewki elektromagnetyczne). Jego rolą jest implementacja algorytmów kontroli (detumbling i pointing) oraz zarządzanie działaniem zgodnie ze spodziewanym efektem.</p>
<p>Folder core zawiera funkcje pomocne w pracy, głównie związane z operacjami matematycznymi czy szeroko pojętą orientacją przestrzenną i jej przetwarzaniem.
- Skrypt logger.py zawiera zdefiniowany moduł do wyświetlania.
- Skrypt state.py odpowiada za zarządzanie wektorem stanu.
- Skrypt transformations.py skupia się na funkcjach związanych z orientacją, takich jak przejścia między układami współrzędnych, operacje na kwaternionach i obroty.
- Skrypt utilities.py zawiera wszelkie pozostałe przydatne funkcje, jak zmiana formatu daty.</p>
<p>W folderze setup zebrane są informacje dotyczące ustawień symulacji, danych wejściowych oraz skrypty odpowiedzialne za ich przetwarzanie.
- Plik tle zgodnie z nazwą zawiera TLE (Two-Line Element Set) opisujący parametry orbitalne satelity.
- Skrypt two_line_element.py odpowiada za jego wczytywanie i intuicyjne wyciąganie zawartych w nim parametrów.
- Plik initial_settings.json jest zbiorem parametrów i ustawień odpowiadających za stan początkowy, wartości stałych, parametry satelity czy wykorzystywane tryby. Z jego poziomu można zarządzać większością zmiennych mających wpływ na przebieg symulacji.
- Skrypt initial_settings.py odpowiada za wczytywanie i zarządzanie ustawieniami zawartymi w initial_settings.json.</p>
<p>Folder visualizations związany jest z wykresami pozwalającymi sprawdzić przebieg symulacji.
- Skrypt visualizations.py zawiera kod odpowiedzialny za tworzenie wykresów.</p>
<p>W folderze templates zdefiniowane są pliki, które stanowią szkielet opisujący podstawową zawartość najważniejszych elementów repozytorium. Zawarte w nich parametry są niezbędnymi elementami właściwych skryptów.</p>
<h2 id="pierwsze-uruchomienie">Pierwsze uruchomienie<a class="headerlink" href="#pierwsze-uruchomienie" title="Permanent link">&para;</a></h2>
<p>Uruchomienie może odbyć się na dwa sposoby. Po zbudowaniu środowiska możliwe jest albo wykonanie skryptu adcs.py, który zawiera zintegrowaną symulację, lub notatnikiem Jupyter Notebook. W tym przypadku kod wykona się dla domyślnych ustawień i powinien zwrócić normalne logi.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>2025-11-14 23:42:20 | INFO | Simulation initialized with the following parameters:
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>2025-11-14 23:42:20 | INFO | Number of iterations: 10000
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>2025-11-14 23:42:20 | INFO | Satellite mass: 1.2 kg
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>2025-11-14 23:42:20 | INFO | Satellite inertia: [[0.002 0.    0.   ]
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a> [0.    0.002 0.   ]
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a> [0.    0.    0.002]] kg*m^2
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>2025-11-14 23:42:20 | INFO | Initial angular velocity: [ 2. -3.  4.] deg/s
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>2025-11-14 23:42:20 | INFO | Initial attitude (Euler angles): [0. 0. 0.] deg
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>2025-11-14 23:42:20 | INFO | Selected sensor fusion algorithm: EKF
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>2025-11-14 23:42:20 | INFO | Magnetometer noise: 10.0 nT
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>2025-11-14 23:42:20 | INFO | Sunsensor noise: 0.2 deg
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>2025-11-14 23:42:20 | INFO | Sensor on time: 2 seconds, actuator on time: 8 seconds
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>2025-11-14 23:42:20 | INFO | Iteration 0 of 10000
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>2025-11-14 23:42:25 | INFO | Iteration 100 of 10000
</span></code></pre></div>
<p>Taka forma oznacza, że kod działa poprawnie.</p>
<h1 id="podstawy">Podstawy<a class="headerlink" href="#podstawy" title="Permanent link">&para;</a></h1>
<p>Poniżej w skrócie przedstawione zostały najważniejsze zagadnienia teoretyczne wraz z przykładami zastosowania i odniesienia do zastosowań w kodzie symulacji. Jako że niektóre funkcje i metody zostały przygotowane konkretnie do działania w ramach repozytorium, ich poprawne funkcjonowanie wymaga inicjalizacji podstawowych obiektów i parametrów. Może to być wykonane poniższym fragmentem kodu (w większości przypadków ten fragment będzie umieszczony na początku):</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">spacecraft.satellite</span><span class="w"> </span><span class="kn">import</span> <span class="n">SatelliteImplementation</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">setup.initial_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">SimulationSetupReader</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">setup.two_line_element</span><span class="w"> </span><span class="kn">import</span> <span class="n">TwoLineElementReader</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">spacecraft.sensors</span><span class="w"> </span><span class="kn">import</span> <span class="n">MagnetometerImplementation</span><span class="p">,</span> <span class="n">SunsensorImplementation</span><span class="p">,</span> <span class="n">SensorFusionImplementation</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="n">setup</span> <span class="o">=</span> <span class="n">SimulationSetupReader</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;setup/initial_settings.json&#39;</span><span class="p">))</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="n">tle</span> <span class="o">=</span> <span class="n">TwoLineElementReader</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;setup/tle&#39;</span><span class="p">))</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="n">magnetometer</span> <span class="o">=</span> <span class="n">MagnetometerImplementation</span><span class="p">(</span><span class="n">setup</span><span class="p">)</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="n">sunsensor</span> <span class="o">=</span> <span class="n">SunsensorImplementation</span><span class="p">(</span><span class="n">setup</span><span class="p">)</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="n">sensor_fusion</span> <span class="o">=</span> <span class="n">SensorFusionImplementation</span><span class="p">(</span><span class="n">setup</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;triad&#39;</span><span class="p">,</span> <span class="s1">&#39;quest&#39;</span><span class="p">,</span> <span class="s1">&#39;ekf&#39;</span><span class="p">],</span> <span class="n">tr</span><span class="o">.</span><span class="n">euler_xyz_to_quaternion</span><span class="p">(</span><span class="n">setup</span><span class="o">.</span><span class="n">euler_angles</span><span class="p">))</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="n">satellite</span> <span class="o">=</span> <span class="n">SatelliteImplementation</span><span class="p">(</span><span class="n">setup</span><span class="p">,</span> <span class="n">tle</span><span class="p">,</span> <span class="n">magnetometer</span><span class="p">,</span> <span class="n">sunsensor</span><span class="p">,</span> <span class="n">sensor_fusion</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="orbita-i-otoczenie">Orbita i otoczenie<a class="headerlink" href="#orbita-i-otoczenie" title="Permanent link">&para;</a></h2>
<h3 id="data-julianska-jd-julian-date">Data juliańska (JD - Julian Date)<a class="headerlink" href="#data-julianska-jd-julian-date" title="Permanent link">&para;</a></h3>
<p>Data juliańska jest często wykorzystywaną formą przedstawienia czasu w obliczeniach i algorytmach astronomicznych. Jest to ułamek przedstawiający liczbę dni od 1 stycznia 4713 r. p.n.e. godziny 12. Na przykład dla daty w formacie UTC 2025-10-18 00:00:00.000 JD wyniesie 2460966.5. Czasem spotkać można format Zmodyfikowanej Daty Juliańskiej (MJD - Modified Julian Date), która ma na celu uproszczenie przedstawionego ułamka i liczona jest jako MJD = JD - 2400000.5. Dla powyższego przykładu będzie to 60966. W kodzie zastosowana jest standardowa JD, która wykorzystywana jest w bibliotece Skyfield. Wchodzi jako argument do modelu propagatora i pozwala uzyskać parametry orbitalne satelity. Za przekształcenie odpowiada funkcja, która zwraca aktualny czas satelity (czas początku symulacji plus liczba iteracji). Dla domyślnych ustawień biorących aktualny czas jako start będziemy mieli:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">core.utilities</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ut</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="n">time_satellite</span> <span class="o">=</span> <span class="n">satellite</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">date_time</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="n">satellite_julian_date</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">time_julian_date</span><span class="p">(</span><span class="n">satellite</span><span class="p">)</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Satellite time: </span><span class="si">{</span><span class="n">time_satellite</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Satellite Julian date: </span><span class="si">{</span><span class="n">satellite_julian_date</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Powyższy fragment powinien zwrócić przykładowo:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>Satellite time: 2025-10-22 13:25:41.386584
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>Satellite Julian date: &lt;Time tt=2460818.709556771&gt;
</span></code></pre></div>
<p>Uwaga: Skyfield prezentuje czas w skali TT (Terrestrial Time). Różni się ona od UTC o ΔT (sekundy przestępne i dryf). Dla potrzeb IGRF wpływ jest pomijalny, ale dla precyzyjnych konwersji czasowych należy uwzględniać TT↔UTC.</p>
<h3 id="tle">TLE<a class="headerlink" href="#tle" title="Permanent link">&para;</a></h3>
<p>Najpopularniejszym formatem zapisu parametrów obiektów na orbitach okołoziemskich jest TLE (Two-Line Element Set), który zgodnie z nazwą składa się z dwóch linii, gdzie każda seria znaków ma swoje konkretne znaczenie. Przykładowy zapis umieszczony i wykorzystywany w tym repozytorium przedstawiono poniżej (można go również znaleźć pod ścieżką ADCS/setup/tle):</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>1 25544U 98067A 25143.20875603 .00008836 00000-0 16445-3 0 9994
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>2 25544 51.6382 70.8210 0002488 135.0606 10.4960 15.49676890511280
</span></code></pre></div>
<p>Aby prosto wczytywać i wyciągać dane z zapisu TLE stworzono odpowiadający za czytanie kod (two_line_element.py). Pozwala on zarówno wyciągać poszczególne elementy, znając ich nazwy, jak i podawać całe linie pliku w formie str. Znaczenie serii znaków zostało pokrótce dodane do opisów funkcji. Dobre podsumowanie i rozpiskę formatu można znaleźć na Wikipedii (https://en.wikipedia.org/wiki/Two-line_element_set).</p>
<p>Wystarczy zainicjalizować TLE, aby móc z niego skorzystać:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Two Line Element:</span><span class="se">\n</span><span class="si">{</span><span class="n">tle</span><span class="o">.</span><span class="n">line_1</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">tle</span><span class="o">.</span><span class="n">line_2</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Epoch Year: </span><span class="si">{</span><span class="n">tle</span><span class="o">.</span><span class="n">epoch_year</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Epoch Day: </span><span class="si">{</span><span class="n">tle</span><span class="o">.</span><span class="n">epoch_day</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Inclination: </span><span class="si">{</span><span class="n">tle</span><span class="o">.</span><span class="n">inclination</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Bstar Drag: </span><span class="si">{</span><span class="n">tle</span><span class="o">.</span><span class="n">bstar_drag</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Powyższy kod zwróci:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>Two Line Element:
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>1 25544U 98067A 25143.20875603 .00008836 00000-0 16445-3 0 9994
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>2 25544 51.6382 70.8210 0002488 135.0606 10.4960 15.49676890511280
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>Epoch Year: 25
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>Epoch Day: 143.20875603
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>Inclination: 51.6382
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>Bstar Drag: 16445-3
</span></code></pre></div>
<p>Warto zwrócić uwagę na format zapisu, Bstar Drag w TLE zapisane jako „16445-3” należy interpretować jako 0.16445e-3 (tj. 1.6445e-4).</p>
<h3 id="propagator">Propagator<a class="headerlink" href="#propagator" title="Permanent link">&para;</a></h3>
<p>Propagator orbitalny wyznacza położenie satelity, jej prędkość i przyspieszenie w danym momencie. W tej symulacji użyto SGP4 (Simplified General Perturbations 4). Korzysta z danych TLE i wymaga ich okresowej aktualizacji, aby ograniczyć narastanie błędów. Implementacja pochodzi z biblioteki Skyfield.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">skyfield.api</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">skyfield</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="n">satellite_model</span> <span class="o">=</span> <span class="n">skyfield</span><span class="o">.</span><span class="n">EarthSatellite</span><span class="p">(</span><span class="n">tle</span><span class="o">.</span><span class="n">line_1</span><span class="p">,</span> <span class="n">tle</span><span class="o">.</span><span class="n">line_2</span><span class="p">)</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="n">julian_date</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">time_julian_date</span><span class="p">(</span><span class="n">satellite</span><span class="p">)</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="n">position</span> <span class="o">=</span> <span class="n">satellite_model</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">julian_date</span><span class="p">)</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">km</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="n">velocity</span> <span class="o">=</span> <span class="n">satellite_model</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">julian_date</span><span class="p">)</span><span class="o">.</span><span class="n">velocity</span><span class="o">.</span><span class="n">km_per_s</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Position vector: </span><span class="si">{</span><span class="n">position</span><span class="si">}</span><span class="s2"> [km]&quot;</span><span class="p">)</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Velocity vector: </span><span class="si">{</span><span class="n">velocity</span><span class="si">}</span><span class="s2"> [km/s]&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Zgodnie z powyższym przykładem kod powinien zwrócić:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>Position vector: [-4107.48809952 -4489.58941621  3014.80595056] [km]
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>Velocity vector: [ 2.23875988 -5.3942253  -4.96501356] [km/s]
</span></code></pre></div>
<p>Położenie i prędkość są podstawowymi wynikami, ale możliwe jest też uzyskanie wysokości nad elipsoidą (WGS‑84), długości i szerokości geograficznej. Warto zauważyć, że wyniki Skyfield są w układzie GCRS (inercjalny, zgodny z ICRF przy J2000); „ECI” jest używane skrótowo jako nazwa zbiorcza. Jeśli wykorzystywany jest bezpośrednio SGP4/TEME, do ECEF/ITRF potrzebna jest transformacja (precesja, nutacja, czas gwiazdowy).</p>
<p>Nieco więcej można znaleźć pod linkiem https://www.aero.iitb.ac.in/satelliteWiki/index.php/Orbit_Propagator</p>
<h3 id="niska-orbita-okooziemska-leo-low-earth-orbit">Niska orbita okołoziemska (LEO - Low Earth Orbit)<a class="headerlink" href="#niska-orbita-okooziemska-leo-low-earth-orbit" title="Permanent link">&para;</a></h3>
<p>Część kosmosu, która rozciąga się od Ziemi aż do pasów Van Allena, określa się jako niską orbitę okołoziemską. W praktyce mówi się o pułapie od około 200 km do 2000 km. Jest ona szczególnie popularna ze względu na swoją bliskość i związany z tym niski koszt wynoszenia. Jest to jednak równocześnie problem ze względu na wciąż występujący opór atmosferycznego (szczególnie istotny dla pułapu do 300 km) oraz ograniczone pole widzenia. Z punktu widzenia układu określania orientacji i sterowania bliskość do Ziemi ma jeszcze jedną istotną zaletę, czyli stosunkowo silne pole magnetyczne, które może być wykorzystywane w czujnikach i elementach czynnych.</p>
<h3 id="ziemskie-pole-magnetyczne">Ziemskie pole magnetyczne<a class="headerlink" href="#ziemskie-pole-magnetyczne" title="Permanent link">&para;</a></h3>
<p>Ziemia wytwarza naturalnie pole magnetyczne wewnątrz i w swoim otoczeniu. Jego kształt w przybliżeniu odpowiada dipolowi lekko odchylonemu od osi obrotu. Składa się ze składowej stałej i zmiennej (ta druga to typowo 1-5%). Występują też lokalne anomalie. Dzięki obserwacjom opracowano dokładne modele, m.in. IGRF. W tej symulacji użyto biblioteki pyIGRF. Aby z niego skorzystać, potrzebne są współrzędne geograficzne oraz data w formie ułamka dziesiętnego (czas od początku roku przedstawiony jako ułamek, np. 2024.25 jako pierwszy kwartał danego roku).</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pyIGRF</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">core.utilities</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ut</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">datetime</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="n">lat</span> <span class="o">=</span> <span class="n">satellite</span><span class="o">.</span><span class="n">latitude</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="n">lon</span> <span class="o">=</span> <span class="n">satellite</span><span class="o">.</span><span class="n">longitude</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="n">alt_km</span> <span class="o">=</span> <span class="n">satellite</span><span class="o">.</span><span class="n">altitude</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="n">julian_date</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">time_julian_date</span><span class="p">(</span><span class="n">satellite</span><span class="p">)</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="n">dt</span> <span class="o">=</span> <span class="n">julian_date</span><span class="o">.</span><span class="n">utc_datetime</span><span class="p">()</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="n">end</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="n">decimal_year</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">year</span> <span class="o">+</span> <span class="p">(</span><span class="n">dt</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">/</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="c1"># IGRF returns NED components in nT</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="n">d</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">b_n</span><span class="p">,</span> <span class="n">b_e</span><span class="p">,</span> <span class="n">b_d</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">pyIGRF</span><span class="o">.</span><span class="n">igrf_value</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">alt_km</span><span class="p">,</span> <span class="n">decimal_year</span><span class="p">)</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;IGRF Magnetic Field NED: B_n=</span><span class="si">{</span><span class="n">b_n</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, B_e=</span><span class="si">{</span><span class="n">b_e</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, B_d=</span><span class="si">{</span><span class="n">b_d</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> [nT]&quot;</span><span class="p">)</span>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;IGRF Magnetic Field Magnitude: F=</span><span class="si">{</span><span class="n">f</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> [nT]&quot;</span><span class="p">)</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;IGRF Declination: D=</span><span class="si">{</span><span class="n">d</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> [deg], Inclination: i=</span><span class="si">{</span><span class="n">i</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> [deg], Horizontal Intensity: H=</span><span class="si">{</span><span class="n">h</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> [nT]&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Powyższy kod zwróci:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>IGRF Magnetic Field NED: B_n=20470.13, B_e=-760.77, B_d=29507.77 [nT]
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>IGRF Magnetic Field Magnitude: F=35920.94 [nT]
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>IGRF Declination: D=-2.13 [deg], Inclination: i=55.23 [deg], Horizontal Intensity: H=20484.26 [nT]
</span></code></pre></div>
<p>Biblioteka domyślnie zwraca wektor i wypadkową wartość pola, deklinację, inklinację oraz intensywność horyzontalną. Z punktu widzenia ADCS istotny jest jedynie wektor. Warto zwrócić uwagę, że akurat pyIGRF zwraca go w formacie NED (North-East-Down) i przed dalszą pracą należy go poddać odpowiednim transformacjom (patrz rozdział o transformacjach).</p>
<p>Więcej informacji o modelu IGRF można znaleźć tutaj https://geomag.bgs.ac.uk/research/modelling/IGRF</p>
<h3 id="pozycja-sonca">Pozycja Słońca<a class="headerlink" href="#pozycja-sonca" title="Permanent link">&para;</a></h3>
<p>Słońce i jego położenie to kolejny istotny element pomocny w określeniu orientacji w przestrzeni kosmicznej z racji jego dobrze przewidywalnego położenia względem Ziemi. Biorąc pod uwagę ogromną odległość, która dzieli oba ciała niebieskie, dla prostych obliczeń na niskiej orbicie można przyjąć opis z perspektywy planety, pomijając ruch orbitalny satelity. Dobry opis, jak obliczyć krok po kroku pozycję Słońca, można znaleźć ponownie na Wikipedii: https://en.wikipedia.org/wiki/Position_of_the_Sun</p>
<p>W tym przypadku użyto Skyfield do obliczenia wektora Słońca względem Ziemi dla zadanej daty juliańskiej.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">skyfield.api</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">skyfield</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">core.utilities</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ut</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="c1"># load ephemeris data for sun and earth</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="n">eph</span> <span class="o">=</span> <span class="n">skyfield</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;de421.bsp&#39;</span><span class="p">)</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="n">sun</span> <span class="o">=</span> <span class="n">eph</span><span class="p">[</span><span class="s1">&#39;sun&#39;</span><span class="p">]</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="n">earth</span> <span class="o">=</span> <span class="n">eph</span><span class="p">[</span><span class="s1">&#39;earth&#39;</span><span class="p">]</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="n">julian_date</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">time_julian_date</span><span class="p">(</span><span class="n">satellite</span><span class="p">)</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="n">sun_position_eci</span> <span class="o">=</span> <span class="n">earth</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">julian_date</span><span class="p">)</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">sun</span><span class="p">)</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">km</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sun Position ECI: </span><span class="si">{</span><span class="n">sun_position_eci</span><span class="si">}</span><span class="s2"> [km]&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Powyższy kod zwróci:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>Sun Position ECI: [7.11550861e+07 1.22678186e+08 5.31785009e+07] [km]
</span></code></pre></div>
<p>Zwrócony wektor Słońca jest w układzie ICRF (dla uproszczeń traktowany jako „ECI”).</p>
<h2 id="orientacja-i-transformacje">Orientacja i transformacje<a class="headerlink" href="#orientacja-i-transformacje" title="Permanent link">&para;</a></h2>
<h3 id="ukady-odniesienia">Układy odniesienia<a class="headerlink" href="#ukady-odniesienia" title="Permanent link">&para;</a></h3>
<p>Aby wyznaczyć orientację przestrzenną, należy najpierw ustalić układ współrzędnych. Ze względu na różnorodność obiektów i zastosowań w przestrzeni kosmicznej stosowany jest cały szereg różnych układów. Poniżej omówiono kilka, które przewijają się w tym repozytorium.</p>
<ul>
<li>
<p>Układ Satelity (Satellite Body - SB) - jest to układ na stałe związany ze statkiem kosmicznym, a więc poruszający i obracający się razem z nim po orbicie. W przypadku uproszczonej symulacji małego obiektu będzie on powiązany z czujnikami i to właśnie w nim podawane będą symulowane pomiary. W praktyce jednak definiuje się tzw. bazę nawigacyjną w pewnym punkcie satelity, a czasem czujniki mogą mieć własne układy odniesienia.</p>
</li>
<li>
<p>Ziemski układ inercjalny (Earth-Centered Inertial - ECI) - układ związany z Ziemią, ale zablokowany względem gwiazd. Oś Z w kierunku bieguna północnego, oś X wzdłuż przecięcia równika i ekliptyki, oś Y dopełniająca. Początek w środku masy Ziemi. W praktyce często używa się GCRS (zgodny z ICRF).</p>
</li>
<li>
<p>Ziemski układ związany (Earth-Centered Earth-Fixed - ECEF) - układ obracający się z Ziemią. Oś Z wzdłuż osi obrotu Ziemi, oś X to przecięciecie równika i południka 0°, oś Y równika i południka 90°E.</p>
</li>
<li>
<p>East-North-Up / North-East-Down (ENU / NED) - są to dwie wariacje układu współrzędnych przydatnego do opisywania obiektów w okolicy Ziemi. Dwie peirwsze osie (X i Y) są zorientowane zgodnie z kierunkiem północnym lub wschodnim, a zasadniczą różnicą między nimi jest oś Z, która może być zwrócona w kierunku środka Ziemi lub przeciwnym (ENU: x=East, y=North, z=Up. NED: x=North, y=East, z=Down). Ten układ również może się pojawić w kontekście pola magnetyczego (modele IGRF zwracają wartości w tym układzie).</p>
</li>
<li>
<p>International Celestial Reference Frame (ICRF - International Celestial Reference Frame) - inercjalny układ odniesienia z początkiem w barycentrum Układu Słonecznego; w praktyce używany do efemeryd. Dla orbit okołozimskich traktowany jako „ECI”.</p>
</li>
<li>
<p>Longitude / Latitude / Altitude (LLA - długość, szerokość, wysokość nad elipsoidą) - forma geodezyjna względem WGS‑84.</p>
</li>
</ul>
<h3 id="przedstawienie-orientacji-i-rotacji">Przedstawienie orientacji i rotacji<a class="headerlink" href="#przedstawienie-orientacji-i-rotacji" title="Permanent link">&para;</a></h3>
<p>W przypadku układu ADCS dla satelity na niskiej orbicie okołoziemskiej najważniejszymi układami będą ECI i SBF, gdzie pierwszy jest punktem odniesienia, a drugi związany jest z pomiarami wykonywanymi na satelicie. Przejście między nimi będzie składało się z translacji (przesunięcia) i rotacji. Pierwszy z tych dwóch elementów zapewnia propagator, zwracając położenie satelity w danym momencie. Natomiast znalezienie odpowiedniej rotacji, która równocześnie będzie oznaczała orientację przestrzenną satelity, jest zadaniem układu ADCS osiąganym na podstawie wykonywania pomiarów czujnikami i porównywania ich z referencją. Przedstawienie orientacji i rotacji może odbyć się na kilka sposobów:</p>
<ul>
<li>Kąty Eulera - czyli trzy kolejne rotacje względem wybranych osi układu. Choć jest to dość intuzyjny sposób, chętnie wykorzystywany choćby w lotnictwie, posiada swoje ograniczenia czyniące go mniej użytecznym w kosmosie np. blokada przegubu (gimbal lock). W kodzie używane do inicjalizacji i wizualizacji.</li>
<li>Kwaternion - q = [u_x sin(α/2), u_y sin(α/2), u_z sin(α/2), cos(α/2)]. Czteroelementowe przedstawienie rotacji, składające się z części wektorowej i skalarnej. Część wektorowa odpowiada osi obrotu u, a część skalarna to cos(α/2). Kwaternion jest zwięzłą, wygodną i stabilną numerycznie reprezentacją rotacji, pozbawioną wad kątów Eulera. </li>
<li>Macierz rotacji - najbardziej podstawowa forma przedstawienia to macierz, którą powinno się pomnożyć pierwotny wektor, aby otrzymać wektor docelowy.</li>
</ul>
<p>Tematyka rotacji potrafi być podchwytliwa i generować błędy, aby zminimalizować ich ryzyko, do większości operacji wykorzystywana jest sprawdzona biblioteka scipy, która obsługuje wszystkie najważniejsze funkcje. Poniżej przedstawiono przykład obejmujący prostą rotację w formie kątów Eulera oraz kwaternionu przy pomocy wspomnianej biblioteki.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">scipy.spatial.transform</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">R</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="n">euler_angles_init</span> <span class="o">=</span> <span class="p">[</span><span class="mf">90.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>  <span class="c1"># degrees</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="n">quaternion_init</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.70710678</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.70710678</span><span class="p">]</span>  <span class="c1"># [x, y, z, w]</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="n">reproduced_quaternion</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">Rotation</span><span class="o">.</span><span class="n">from_euler</span><span class="p">(</span><span class="s1">&#39;xyz&#39;</span><span class="p">,</span> <span class="n">euler_angles_init</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">as_quat</span><span class="p">()</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="n">reproduced_euler_angles</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">Rotation</span><span class="o">.</span><span class="n">from_quat</span><span class="p">(</span><span class="n">quaternion_init</span><span class="p">)</span><span class="o">.</span><span class="n">as_euler</span><span class="p">(</span><span class="s1">&#39;xyz&#39;</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initial Euler Angles: </span><span class="si">{</span><span class="n">euler_angles_init</span><span class="si">}</span><span class="s2"> [deg]&quot;</span><span class="p">)</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initial Quaternion: </span><span class="si">{</span><span class="n">quaternion_init</span><span class="si">}</span><span class="s2"> [x, y, z, w]&quot;</span><span class="p">)</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reproduced Quaternion from Euler Angles: </span><span class="si">{</span><span class="n">reproduced_quaternion</span><span class="si">}</span><span class="s2"> [x, y, z, w]&quot;</span><span class="p">)</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reproduced Euler Angles from Quaternion: </span><span class="si">{</span><span class="n">reproduced_euler_angles</span><span class="si">}</span><span class="s2"> [deg]&quot;</span><span class="p">)</span>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a><span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>
</span><span id="__span-17-16"><a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a><span class="n">rotation</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">Rotation</span><span class="o">.</span><span class="n">from_quat</span><span class="p">(</span><span class="n">quaternion_init</span><span class="p">)</span>
</span><span id="__span-17-17"><a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a><span class="n">v2</span> <span class="o">=</span> <span class="n">rotation</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
</span><span id="__span-17-18"><a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a>
</span><span id="__span-17-19"><a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Original Vector: </span><span class="si">{</span><span class="n">v1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-17-20"><a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Rotated Vector: </span><span class="si">{</span><span class="n">v2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Powyższy kod zwróci:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>Initial Euler Angles: [90.0, 0.0, 0.0] [deg]
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>Initial Quaternion: [0.70710678 0.         0.         0.70710678] [x, y, z, w]
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>Reproduced Quaternion from Euler Angles: [0.70710678 0.         0.         0.70710678] [x, y, z, w]
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>Reproduced Euler Angles from Quaternion: [90.  0.  0.] [deg]
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>Original Vector: [0.0, 1.0, 0.0]
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>Rotated Vector: [0. 0. 1.]
</span></code></pre></div>
<p>Uwaga: po każdej aktualizacji kwaternion powinien być normalizowany, aby ograniczyć dryf numeryczny.</p>
<p>W podobny sposób stworzono funkcje do przechodzenia pomiędzy układami współrzędnymi, które można znaleźć w core/transformations.py. Poniżej przedstawiono użycie pięciu podstawowych, zaimplementowanych przejść:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">core.transformations</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">tr</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">core.utilities</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ut</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="n">julian_date</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">time_julian_date</span><span class="p">(</span><span class="n">satellite</span><span class="p">)</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="n">quaternion_init</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.70710678</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.70710678</span><span class="p">]</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="n">enu_ecef</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">enu_to_ecef</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">longitude</span><span class="p">)</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="n">ned_ecef</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">ned_to_ecef</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">longitude</span><span class="p">)</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="n">ecef_eci</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">ecef_to_eci</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">julian_date</span><span class="p">)</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="n">eci_sbf</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">eci_to_sbf</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">quaternion_init</span><span class="p">)</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="n">sbf_eci</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">sbf_to_eci</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">quaternion_init</span><span class="p">)</span>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Original Vector: </span><span class="si">{</span><span class="n">v1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ENU to ECEF: </span><span class="si">{</span><span class="n">enu_ecef</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NED to ECEF: </span><span class="si">{</span><span class="n">ned_ecef</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-19-17"><a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ECEF to ECI: </span><span class="si">{</span><span class="n">ecef_eci</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-19-18"><a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ECI to SBF: </span><span class="si">{</span><span class="n">eci_sbf</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-19-19"><a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SBF to ECI: </span><span class="si">{</span><span class="n">sbf_eci</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Powyższy kod zwróci:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>Original Vector: [0.0, 1.0, 0.0]
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>ENU to ECEF: [ 0.02791803  0.44449952 -0.89534393]
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>NED to ECEF: [ 0.99961022 -0.01241439  0.02500598]
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>ECEF to ECI: [0.69189531 0.72199784 0.        ]
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>ECI to SBF: [0. 0. 1.]
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>SBF to ECI: [ 0.  0. -1.]
</span></code></pre></div>
<h2 id="czujniki-i-elementy-czynne">Czujniki i elementy czynne<a class="headerlink" href="#czujniki-i-elementy-czynne" title="Permanent link">&para;</a></h2>
<h3 id="magnetometry">Magnetometry<a class="headerlink" href="#magnetometry" title="Permanent link">&para;</a></h3>
<p>Magnetometr jest urządzeniem pozwalającym na pomiar pola magnetycznego. Istnieje wiele rodzajów magnetometrów o różnych możliwościach i rozmiarach w zależności od zastosowania i charakteru misji. W przypadku niewielkich satelitów na niskiej orbicie stosowane są magnetometry trzyosiowe. Często są magnetometry to transduktorowe, działające w oparciu o nasycenie rdzenia magnetycznego lub działające na zasadzie magnetorezystancji. Dzięki postępującej miniaturyzacji są to często niewielkie, lekkie układy o małym poborze mocy.</p>
<p>W przypadku tej symulacji magnetometr wybrany jako główny czujnik. Symulacja magnetometrów opiera się o pole magnetyczne uzyskane przy pomocy modelu IGRF (International Geomagnetic Reference Field - IGRF). Aby uzyskać wartość będącą odpowiednikiem faktycznego pomiaru wykonanego przez przyrządy pokładowe, wektor musi zostać przekształcony do układu SBF. Możliwe jest również dodanie szumu, w tym przypadku opartego o maksymalną bezwzględną odchyłkę.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>mag_field_sbf += noise_vector
</span></code></pre></div>
<p>gdzie noise_vector = &lt;-x: +x&gt;.</p>
<p>Ustawienia dotyczące szumów można znaleźć w initial_settings.json:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>&quot;Magnetometer&quot;:
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>{
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>  &quot;Noise&quot;: true,
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>  &quot;AbsoluteNoise&quot;: 10,
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>  &quot;UnitInfo&quot;: &quot;nT&quot;
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>},
</span></code></pre></div>
<p>Model szumu jest uproszony (jednakowa, jednostajna odchyłka ±A na każdej osi). W rzeczywistych czujnikach częściej spotka się rozkład Gaussa + zakłocenia + dryf.</p>
<h3 id="czujnik-sonca">Czujnik Słońca<a class="headerlink" href="#czujnik-sonca" title="Permanent link">&para;</a></h3>
<p>Czujniki Słońca umożliwiają określenie tzw. wektora Słońca, czyli kierunku, w którym znajduje się Słońce względem satelity. W zależności od roli pomiaru w systemie mogą to być bardzo dokładne czujniki matrycowe lub nieco mniej dokładne, oparte o układy kilku fotodiod rozmieszczonych na zewnętrznych panelach. To właśnie ten drugi najczęściej spotkać można na małych satelitach. Dzięki swojej prostocie stanowią one bardzo dobre uzupełnienie dla pozostałych czujników. W tym przypadku traktowany jest on z reguły jako drugi czujnik.</p>
<p>Względne położenie Słońca uzyskiwane jest poprzez model obserwacji w bibliotece Skyfield (co opisano wcześniej), a następnie transformowane jest do układu SB. W ten sposób uzyskiwany jest odpowiedni wektor w formie, w jakiej byłby odczytany za pomocą czujników satelity. Następnie może on zostać zaszumiony. Szum czujnika Słońca realizowany jest jako obrót wektora wokół losowej osi o losowym kącie z zadanego zakresu.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>sun_vector = raw_sun_vector * R
</span></code></pre></div>
<p>gdzie R to macierz rotacji reprezentująca obrót o kąt z zakresu &lt;-x: +x&gt;.</p>
<p>Ustawienia dotyczące szumów znajdują się w initial_settings.json:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>&quot;SunSensor&quot;:
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>{
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>  &quot;Noise&quot;: true,
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>  &quot;AngularNoise&quot;: 0.2,
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>  &quot;UnitInfo&quot;: &quot;deg&quot;
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>},
</span></code></pre></div>
<h3 id="zyroskopy">Żyroskopy<a class="headerlink" href="#zyroskopy" title="Permanent link">&para;</a></h3>
<p>Żyroskop to rodzaj czujnika, który mierzy prędkość kątową bezpośrednio (nie przyspieszenie kątowe). W klasycznym ujęciu jest to duże, wirujące urządzenie mechaniczne wykorzystujące zasadę zachowania momentu pędu. W praktyce misji kosmicznych zazwyczaj wykorzystuje się układy MEMS (Micro-Electromechanical Systems), czyli urządzenia oparte o niewielkie drgające elementy, które pozwalają zmierzyć prędkości obrotowe w oparciu o siłę Coriolisa. Są to niewielkie i tanie układy, jednak ich wadami są ograniczona dokładność i narastający z biegiem czasu dryf. W przypadku tej symulacji prędkość kątowa może być wyznaczana z różnicy orientacji między iteracjami: należy dzielić przez Δt i najlepiej użyć pochodnej kwaternionu (ω = 2 q̇ ⊗ q⁻¹). Dryf nie jest szczegółowo modelowany.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>&quot;Gyroscope&quot;:
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>{
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>  &quot;Bias&quot;: [0.0, 0.0, 0.0],
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>  &quot;ProcessNoise&quot;: [1e-8, 1e-8, 1e-8],
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>  &quot;UnitInfo&quot;: &quot;deg/s&quot;
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>},
</span></code></pre></div>
<h3 id="fuzja-sensorow">Fuzja sensorów<a class="headerlink" href="#fuzja-sensorow" title="Permanent link">&para;</a></h3>
<p>Jednym z podstawowych problemów związanych z określaniem orientacji przestrzennej jest łączenie pomiarów z dwóch i więcej źródeł w taki sposób, aby uzyskać jedną, bardziej niezawodną i dokładniejszą estymatę. Wykorzystanie kilku rodzajów czujników pozwala na zbilansowanie potencjalnych problemów w sytuacjach, gdzie jeden poradziłby sobie gorzej. Aby uzyskać sprawnie przetworzony pomiar, tworzone są specjalne algorytmy. W przypadku misji kosmicznych często wyróżnia się trzy z nich:</p>
<ul>
<li>
<p>TRIAD (Three-Axis Attitude Determination) - jest najbardziej podstawowym i najprostszym z nich. Umożliwia przetworzenie pomiarów jedynie z dwóch czujników, znając wektory w układzie satelity i ich odpowiedniki w układzie odniesienia. Odnajdywanie macierzy rotacji między nimi odbywa się poprzez tworzenie tzw. triad (układy odniesienia bazujące na danych wektorach) i wzajemnego położenia między nimi.</p>
</li>
<li>
<p>QUEST (QUaternion ESTimator) - jest algorytmem odnajdywania rotacji dla serii wektorów (QUEST może przetworzyć dwa czujniki i więcej, w odróżnieniu od TRIAD-a) poprzez minimalizację funkcji błędu (problem Wahby). Wynikiem jego działania jest bezpośrednio kwaternion przedstawiający rotację, który odpowiada wektorowi własnemu (eigenvector) macierzy skonstruowanej z danych pomiarowych. Opcjonalnie pomiary mogą być zaopatrzone w wagi, definiując najbardziej dokładne z nich.</p>
</li>
<li>
<p>EKF (Extended Kalman Filter) - jest bardziej zaawansowanym algorytmem estymacji stanu dla równań nieliniowych. Opiera się na działaniu iteracyjnym, z jednej strony wykorzystując model dynamiki obiektu, aby przewidywać jego przyszły stan, z drugiej korzysta z pomiarów czujników do jego korekcji. W przypadku układu ADCS będzie więc wykorzystywał nie tylko pary wektorów pomiarów, ale również prędkość kątową oraz poprzednią orientację. Estymaty wyliczane przy pomocy EKF powinny być zauważalnie dokładniejsze od TRIAD-a i QUEST-a. Poniżej przedstawiono przykład wykorzystania algorytmów do uzyskania kwaternionu dla układu dwóch wektorów obróconych o 90 stopni przy zerowej prędkości kątowej.</p>
</li>
</ul>
<div class="language-python highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="c1"># two reference vectors</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="n">v1_i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="n">v2_i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.70710678</span><span class="p">,</span> <span class="mf">0.70710678</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="c1"># two measured vectors with some noise rotated by 90 deg around z axis</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="n">v1_b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="n">v2_b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.70710678</span><span class="p">,</span> <span class="mf">0.70710678</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="n">q_reference</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.70710678</span><span class="p">,</span> <span class="mf">0.70710678</span><span class="p">])</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="c1"># typically the first vector should be the most accurate one</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="n">v_i_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">v1_i</span><span class="p">,</span> <span class="n">v2_i</span><span class="p">]</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="n">v_b_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">v1_b</span><span class="p">,</span> <span class="n">v2_b</span><span class="p">]</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a><span class="c1"># normalize before estimation (TRIAD/QUEST/EKF)</span>
</span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a><span class="n">v_i_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">v_i_list</span><span class="p">]</span>
</span><span id="__span-26-19"><a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a><span class="n">v_b_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">v_b_list</span><span class="p">]</span>
</span><span id="__span-26-20"><a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a>
</span><span id="__span-26-21"><a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a><span class="n">q_triad</span> <span class="o">=</span> <span class="n">sensor_fusion</span><span class="o">.</span><span class="n">triad</span><span class="p">(</span><span class="n">v_b_list</span><span class="p">,</span> <span class="n">v_i_list</span><span class="p">)</span>
</span><span id="__span-26-22"><a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a><span class="n">q_quest</span> <span class="o">=</span> <span class="n">sensor_fusion</span><span class="o">.</span><span class="n">quest</span><span class="p">(</span><span class="n">v_b_list</span><span class="p">,</span> <span class="n">v_i_list</span><span class="p">)</span>
</span><span id="__span-26-23"><a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a><span class="n">q_ekf</span> <span class="o">=</span> <span class="n">sensor_fusion</span><span class="o">.</span><span class="n">ekf</span><span class="p">(</span><span class="n">v_b_list</span><span class="p">,</span> <span class="n">v_i_list</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">q_reference</span><span class="p">)</span>
</span><span id="__span-26-24"><a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a>
</span><span id="__span-26-25"><a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a><span class="c1"># signs may differ between algorithms, but represent the same rotation q = -q</span>
</span><span id="__span-26-26"><a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reference quaternion: </span><span class="si">{</span><span class="n">q_reference</span><span class="si">}</span><span class="s2"> [x, y, z, w]&quot;</span><span class="p">)</span>
</span><span id="__span-26-27"><a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;TRIAD Quaternion: </span><span class="si">{</span><span class="n">q_triad</span><span class="si">}</span><span class="s2"> [x, y, z, w]&quot;</span><span class="p">)</span>
</span><span id="__span-26-28"><a id="__codelineno-26-28" name="__codelineno-26-28" href="#__codelineno-26-28"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;QUEST Quaternion: </span><span class="si">{</span><span class="n">q_quest</span><span class="si">}</span><span class="s2"> [x, y, z, w]&quot;</span><span class="p">)</span>
</span><span id="__span-26-29"><a id="__codelineno-26-29" name="__codelineno-26-29" href="#__codelineno-26-29"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;EKF Quaternion: </span><span class="si">{</span><span class="n">q_ekf</span><span class="si">}</span><span class="s2"> [x, y, z, w]&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Powyższy kod zwróci:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>Reference quaternion: [0.         0.         0.70710678 0.70710678] [x, y, z, w]
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>TRIAD Quaternion: [-0.01693025 -0.01254686  0.7105929   0.70328776] [x, y, z, w]
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>QUEST Quaternion: [-0.01691007 -0.01257405  0.70946175  0.70442883] [x, y, z, w]
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>EKF Quaternion: [-0.00855144 -0.00616122  0.70900606  0.70512362] [x, y, z, w]
</span></code></pre></div>
<p>Widać, że estymata zapewniona przez QUEST jest nieco lepsza niż TRIAD, jednak to EKF najbliższy jest wartości prawdziwej (wynik będzie różnił się przy każdym uruchomieniu ze względu na losowe szumy). Wybór algorytmu do fuzji sensorów oraz parametry jego uruchomienia ustalane są z poziomu initial_settings.json (jedynie TRIAD nie posiada dodatkowych parametrów).</p>
<h3 id="cewki-elektromagnetyczne">Cewki elektromagnetyczne<a class="headerlink" href="#cewki-elektromagnetyczne" title="Permanent link">&para;</a></h3>
<p>Tak jak rolą sensorów jest zapewnienie niezawodnej informacji o dynamice i orientacji satelity, tak rolą elementów czynnych jest wykorzystanie tej informacji w celu zapewnienia sterowania zgodnie z ustalonym profilem. Cewki elektromagnetyczne są podstawowym elementem sterowania dla małych satelitów na niskich orbitach okołoziemskich. Najczęściej występują w formie trzyosiowego układu cewek na rdzeniu magnetycznym lub na rdzeniu powietrznym. Ta druga forma jest często stosowana ze względu na lepszą możliwość wpasowania w konstrukcję satelity i taki układ założono w projekcie.</p>
<p>Podstawą działania jest generowanie przez cewkę, przez którą płynie prąd, momentu magnetycznego. Oddziałując z ziemskim polem magnetycznym, będzie on generował moment obrotowy zgodnie ze wzorem:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>τ = m × B
</span></code></pre></div>
<p>Jednostki: m [A·m²], B [T], τ [N·m]. </p>
<p>Sterowanie jest ograniczone lokalnie słabym polem oraz geometrią: gdy wymagany moment jest równoległy do B, m × B ≈ 0 i sterowanie staje się nieefektywne.</p>
<p>Parametry cewki zastosowanej w projekcie można znaleźć w initial_settings.json:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nt">&quot;Magnetorquer&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="w">  </span><span class="nt">&quot;Coils&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="w">  </span><span class="nt">&quot;MaxCurrent&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="w">  </span><span class="nt">&quot;CoilArea&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">90</span><span class="p">,</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">  </span><span class="nt">&quot;SafetyFactor&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w">  </span><span class="nt">&quot;AlphaCap&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w">  </span><span class="nt">&quot;UnitInfo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;coils, cm^2, A, unitless, deg/s2&quot;</span>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="p">}</span>
</span></code></pre></div>
<p>Uwaga: CoilArea jest w cm² i w obliczeniach przeliczana na m² (×1e‑4).</p>
<h1 id="symulacja">Symulacja<a class="headerlink" href="#symulacja" title="Permanent link">&para;</a></h1>
<p>Powyższe elementy składowe tworzą model, który umożliwia symulowanie niewielkiego satelity na orbitach okołoziemskich.</p>
<h2 id="ustawienia-wejsciowe">Ustawienia wejściowe<a class="headerlink" href="#ustawienia-wejsciowe" title="Permanent link">&para;</a></h2>
<p>W celu ułatwienia zarządzania wszelkimi parametrami mającymi wpływ na przebieg symulacji zostały one umieszczone w pliku json, a do jego zarządzania stworzony został kod initial_settings.py. Dzięki temu możliwe jest zarządzanie każdym etapem bez potrzeby zbędnego wchodzenia w odpowiadający mu kod. Możliwe jest też tworzenie kilku wariantów uruchomienia, jako że plik json podawany jest jako parametr wejściowy w formie ścieżki, a nie jest zapisany na sztywno. Całość pogrupowana jest w strukturze przypominającej słownik w Pythonie z pięcioma kluczami na głównym poziomie i kolejnymi bardziej szczegółowymi. Do tego dodany jest wpis z jednostkami parametrów, nie jest on nigdzie wczytywany i ma charakter informacyjny.</p>
<ul>
<li>
<p>Simulation - zawiera podstawowe parametry dotyczące samej symulacji, takie jak stałe fizyczne, zarządzanie krokami symulacji czy datę startu.</p>
</li>
<li>
<p>Satellite - zawiera wszelkie parametry opisujące bezpośrednio satelitę, jak masa, inercja i początkowe ustawienie.</p>
</li>
<li>
<p>Sensors - zawiera wszelkie istotne parametry związane z sensorami i wykonywaniem pomiarów. Będą więc to nastawy samych czujników, ale też parametry algorytmu fuzji sensorów.</p>
</li>
<li>
<p>Actuators - zawiera parametry dotyczące elementów czynnych, w tym wypadku będą to jedynie parametry cewki elektromagnetycznej, takie jak liczba zwojów, pole przekroju, współczynnik bezpieczeństwa, ograniczenie przyspieszenia.</p>
</li>
<li>
<p>Controls - zawiera wszelkie parametry związane ze sterowaniem satelitą, takie jak wybór algorytmu fuzji sensorów, ustawienia i parametry związane z algorytmami detumblingu i pointingu czy przełączania trybów.</p>
</li>
</ul>
<p>Skrypt initial_settings.py przygotowany jest do sprawnego działania z aktualnie zastaną strukturą wpisów. Brak któregokolwiek z wymaganych kluczy spowoduje pojawienie się błędu, jednak możliwe jest dodanie dodatkowych wpisów. Jeśli takowy pojawi się na najniższym poziomie, po prostu zostanie dodany do wczytanej struktury. Dodanie jednostki jest opcjonalne. Na przykład:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>&quot;Magnetorquer&quot;:
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>{
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>  &quot;Coils&quot;: 200,
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>  &quot;MaxCurrent&quot;: 0.2,
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>  &quot;CoilArea&quot;: 90,
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>  &quot;SafetyFactor&quot;: 0.9,
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>  &quot;AlphaCap&quot;: 0.5,
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>  &quot;WireDia&quot;: 0.8,
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>  &quot;UnitInfo&quot;: &quot;coils, cm^2, A, unitless, deg/s2, mm&quot;
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>}
</span></code></pre></div>
<p>Wtedy w zdefiniowanym w skrypcie słowniku pojawi się on jako klucz:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>setup.magnetorquer_params[&quot;WireDia&quot;]
</span></code></pre></div>
<p>Natomiast jeśli dodany zostanie wpis w jakimkolwiek innym miejscu, trafi on do "pozostałych" parametrów zapisanych w self.other_parameters:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>{
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>  &quot;Simulation&quot;: { &quot;PlanetConst&quot;: ... },
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>  &quot;SomeOtherData&quot;: {
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>    &quot;A&quot;: 2,
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>    &quot;B&quot;: 4
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>  }
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>}
</span></code></pre></div>
<p>Wtedy całość zostanie wczytana w dokładnie takiej samej formie:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>data_dict = setup.other_parameters[&quot;SomeOtherData&quot;]
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>A = data_dict[&quot;A&quot;]
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>B = data_dict[&quot;B&quot;]
</span></code></pre></div>
<h2 id="parametry-satelity">Parametry satelity<a class="headerlink" href="#parametry-satelity" title="Permanent link">&para;</a></h2>
<p>Aby ułatwić przeprowadzanie operacji związanych z satelitą, traktowany jest on jako obiekt składający się z pewnych komponentów, a opisujące go najważniejsze parametry zostały określone jako property w ramach satellite.py. Warto zwrócić uwagę na samą inicjalizację:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>satellite = SatelliteImplementation(setup, tle, magnetometer, sunsensor, sensor_fusion)
</span></code></pre></div>
<p>A więc elementami składowymi wpływającymi na stan satelity są dane wejściowe, TLE, dwa czujniki: magnetometr i czujnik słońca oraz algorytm fuzji. Możliwe jest proste dostanie się zarówno do stałych parametrów, jak i na bieżąco aktualizowanych tych, które określają aktualny stan. Dzięki ich wcześniejszemu zdefiniowaniu pojawiają się one jako "podpowiedzi" w edytorze oraz możliwe jest szybkie wyświetlenie ich opisu. Przykładowe parametry przedstwiono poniżej:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>print(satellite.angular_velocity)
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>print(satellite.inertia_matrix)
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>print(satellite.magnetic_field)
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>print(satellite.torque)
</span></code></pre></div>
<p>Powyższy kod zwróci:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>[  8. -14.  11.]
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>[[0.002 0.    0.   ]
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a> [0.    0.002 0.   ]
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a> [0.    0.    0.002]] (array([-12117.938582  , -12371.50694404, -31464.45657624]), array([-12121.11401262, -12375.32291477, -31468.13563725]))
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>[0. 0. 0.]
</span></code></pre></div>
<h2 id="algorytmy">Algorytmy<a class="headerlink" href="#algorytmy" title="Permanent link">&para;</a></h2>
<p>Podstawą zachowania satelity na orbicie są zaimplementowane algorytmy sterowania. Ich definicja związana jest z charakterem misji, dostępnymi czujnikami czy elementami czynnymi. Podstawowe trzy stany, z jakimi można spotkać się w przypadku satelitów, to detumbling (wyhamowywanie obrotów), pointing (skierowanie na cel) oraz stan wyłączony. Przejścia między nimi zdefiniowane są przez osiągnięcie pewnych kryteriów i znaleźć je można w initial_settings.json.</p>
<h3 id="detumbling-wytracanie-obrotow-b-dot">Detumbling (wytracanie obrotów) (B-dot)<a class="headerlink" href="#detumbling-wytracanie-obrotow-b-dot" title="Permanent link">&para;</a></h3>
<p>Wyhamowywanie prędkości obrotowej jest z reguły pierwszym i najważniejszym zadaniem dla układu sterowania. Wypuszczony na orbitę satelita najczęściej trafia na orbitę, obracając się stosunkowo szybko i niekontrolowanie. Aby przejść do poprawnego wykonywania misji, należy jego pozycję przestrzenną ustabilizować poprzez spowolnienie do pewnej wartości granicznej prędkości. Doprowadzenie i utrzymanie odpowiednio niskich obrotów to zadanie detumblingu. Dla założonego w projekcie wykorzystania do sterowania jedynie cewki elektromagnetycznej realizowane będzie to algorytmem zwanym B-dot. Jego nazwa i zasada działania odnoszą się do pochodnej pola magnetycznego. Szybkość zmiany zmierzonego pola magnetycznego będzie proporcjonalna do prędkości kątowej względem na każdej osi. W praktyce generowany moment magnetyczny musi oddziaływać o przeciwnym zwrocie i zostać odpowiednio powiększony o współczynnik wzmocnienia.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>m = -k * dB/dt
</span></code></pre></div>
<p>Istnieje kilka modyfikacji podstawowego algorytmu, które mogą okazać się przydatne w pewnych sytuacjach i zastosowaniach. Dla przykładowego satelity 1U nie będą to jednak różnice wielkie. Poniżej krótko omówione zostały pozostałe warianty:</p>
<ul>
<li>Zmodyfikowany B-dot - jego działanie nie bazuje na pochodnej pola magnetycznego, a bezpośrednio na pomiarach prędkości obrotowej. Jego działanie będzie więc mniej podatne na zakłócenia samego pola magnetycznego, ale wymaga odpowiedniego źródła pomiarów prędkości kątowej.</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>m = -k (ω × B)
</span></code></pre></div>
<ul>
<li>Proporcjonalny B-dot - do standardowego algorytmu dodany człon tłumiący również oparty o prędkość obrotową. Może mieć wpływ stabilizujący w obliczu zmian pola magnetycznego, ale jeśli będzie zbyt mocny, sam będzie powodował oscylacje lub nawet destabilizował kontroler przy małych prędkościach obrotowych.</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>m = -k * dB/dt - k_p * ω
</span></code></pre></div>
<ul>
<li>Adaptujący prędkość obrotową - sama zasada działania nie różni się od podstawowego wariantu, jednak wzmocnienie jest zależne od aktualnej prędkości obrotowej względem pewnej ustalonej wartości granicznej. Powyżej będzie ono odpowiednio powiększone, a poniżej zmniejszone. Taki wariant przyspiesza początkowe wytracanie prędkości, za to mocno łagodzi działania kontrolera na późniejszym etapie, może jednak utrudniać tłumienie przy bardzo małych prędkościach.</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>k = k * (|ω|/ω_ref)^a
</span></code></pre></div>
<ul>
<li>Adaptujący pole magnetyczne - również nie wpływa na sam algorytm, a jedynie modyfikuje wzmocnienie. Jest ono zależne od wartości bezwzględnej pola magnetycznego w stosunku do pewnej wartości granicznej (często przyjmowanej w okolicy średniej pola magnetycznego Ziemi ~45000 nT). Pomaga w ten sposób niwelować wpływ zmian pola wraz z ruchem po orbicie, zwiększając wzmocnienie, gdy te maleje, oraz zmniejszając, gdy jego wartość rośnie.</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>k = k * (B_ref/|B|)^b
</span></code></pre></div>
<p>Co istotne, powyższe warianty mogą się ze sobą łączyć. W większości przypadków jednak podstawowy B-dot będzie wystarczający. Algorytm jest bardzo prosty i niezawodny w swoim działaniu, dla niewielkiego satelity powinien sprawnie zbijać nawet bardzo duże prędkości, a czas jego działania powinien mieścić się od niecałej godziny do maksymalnie kilku (czasu symulacji) w zależności od warunków początkowych. Wynikowy wykres prędkości obrotowej w czasie powinien gładko zbiegać do 0 in kształcie przypominającym funkcję 1/x. Jeśli obserwowane są oscylacje, zmiany kierunku prędkości czy niestabilności, należy upewnić się co do wybranych parametrów.</p>
<ul>
<li>
<p>Wzmocnienie - podstawowy parametr oddziałający, który odpowiada za przekucie pochodnej na odpowiednio duży moment magnetyczny, który może być obsłużony przez cewki. Dla przykładowego satelity 1U wartości między 1000 a 4000 powinny być wystarczające, dla większych również wzmocnienie można odpowiednio zwiększać. Ważnym parametrem, który należy obserwować podczas doboru wzmocnienia, jest obciążenie cewek, jeśli przez długi czas osiąga ono wartości maksymalne, wzmocnienie należy zmniejszyć. Analogicznie w drugą stronę, gdy przez długi czas jest ono bardzo niskie, można je zwiększyć. Pomocniczym parametrem może też być sam spadek prędkości obrotowej - zbyt powolny może sugerować za małe wzmocnienie.</p>
</li>
<li>
<p>Współczynnik proporcjonalny - pełni raczej rolę pomocniczą, stąd jego wartość też powinna być odpowiednio mała. Uwzględniając, że łączony jest on bezpośrednio z prędkością kątową w radianach, można przyjmować wartości między 0.05 a 0.6.</p>
</li>
</ul>
<p>Oprócz tego należy zwrócić uwagę na parametry satelity takie, jak masa i macierz inercji, oraz same parametry cewki elektromagnetycznej. Elementy te, choć nie pojawiają się w samym algorytmie, są kluczowym elementem przetworzenia momentu magnetycznego na moment obrotowy.</p>
<h3 id="pointing-b-cross">Pointing (B-cross)<a class="headerlink" href="#pointing-b-cross" title="Permanent link">&para;</a></h3>
<p>UWAGA: Element ten wciąż jest w trakcie tworzenia i nie zachowuje się stabilnie.</p>
<p>Nakierowanie satelity konkretną stroną w kierunku jakiegoś celu jest jedną z podstawowych funkcji, która może być realizowana w związku z misją. Dla obiektów na orbitach okołoziemskich najczęściej będzie to obrót w kierunku Ziemi (np. nakierowanie kamery) lub w kierunku Słońca (np. optymalne ustawienie paneli słonecznych). Jednym z algorytmów, który można zastosować, wykorzystując cewki elektromagnetyczne, jest B-cross. Opiera się on na zastosowaniu mnożenia wektorowego (cross product) do minimalizacji kąta między dwoma danymi wektorami (cel i aktualne ułożenie). W swojej podstawowej wersji algorytm ma postać członu nakierowującego oraz tłumiącego:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>m = m_align + m_damp = k_a (error_vector × B) + k_d (ω × B)
</span></code></pre></div>
<p>Często stosuje się go w wersji znormalizowanej względem pola magnetycznego w celu poprawy stabilności. Zmiana będzie też przejawiać się w rzędach wielkości współczynników wzmocnienia. Wtedy algorytm przybiera postać:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>m = m_align + m_damp = k_a (error_vector × B)/||B||^2 + k_d (ω × B)/||B||^2
</span></code></pre></div>
<p>Wykorzystanie jedynie cewek niesie za sobą szereg trudności, jak podatność na lokalne zmiany pola magnetycznego czy niemożność generowania momentu w sytuacjach, kiedy dany komponent pola jest równoległy. Do tego dochodzi trudność w doborze optymalnych współczynników i precyzyjnym sterowaniu. To sprawia, że algorytm jest stosowany do wstępnego nakierowania lub jedynie zgrubnego pointingu.</p>
<h3 id="wyliczanie-przyspieszenia-katowego">Wyliczanie przyspieszenia kątowego<a class="headerlink" href="#wyliczanie-przyspieszenia-katowego" title="Permanent link">&para;</a></h3>
<p>Wyznaczenie teoretycznego momentu magnetycznego generowanego przez cewki jest jedynie pierwszym krokiem do osiągnięcia pożądanego przyspieszenia kątowego. Pierwszym krokiem jest przeliczenie składowych na wymagane natężenie prądu w cewkach, uwzględniając liczbę zwojów i pole przekroju:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>i = m / (n_coils * A_coil)
</span></code></pre></div>
<p>A jest w m² (np. z RodArea_cm2 × 1e‑4). W obliczeniach przyjmuje się, że moment obrotowy τ jest równy sumie momentu magnetycznego i momentów zakłóceń:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>τ_total = τ_mag + τ_bias
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>τ_mag = m × B
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>α = I^{-1} ( τ_total − ω × (I ω) )
</span></code></pre></div>
<p>gdzie:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>coriolis = ω × (I * w)
</span></code></pre></div>
<p>Do tak uzyskanego przyspieszenia można jeszcze zastosować ogranicznik, aby zniwelować destabilizację spowodowaną zbyt dużymi i nagłymi skokami przyspieszenia. Wtedy skalowanie należy zaaplikować również do natężenia prądu.</p>
<h3 id="przejscie-miedzy-trybami">Przejście między trybami<a class="headerlink" href="#przejscie-miedzy-trybami" title="Permanent link">&para;</a></h3>
<p>Każdy z omawianych trybów ma swoje konkretnie określone parametry rozpoczęcia i zakończenia działania. Przechodzenie między nimi odbywa się na sposób automatyczny i jest zdefiniowane w initial_settings.json:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>&quot;ModeManagement&quot;:
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>{
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>  &quot;DetumblingOff&quot;: 0.5,
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>  &quot;DetumblingOn&quot;: 1.0,
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>  &quot;PointingOff&quot;: 10.0,
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a>  &quot;PointingOn&quot;: 12.0,
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a>  &quot;PointingDwellTime&quot;: 90,
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a>  &quot;UnitInfo&quot;: &quot;deg/s, deg, deg, deg, s&quot;
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a>}
</span></code></pre></div>
<p>Dla detumblingu kluczowa jest prędkość obrotowa, dla pointingu - utrzymywanie błędu kąta w zakresie przez zadany czas (dwell). Progi mają histerezę: PointingOff &lt; PointingOn oraz DetumblingOff &lt; DetumblingOn, aby uniknąć częstego przełączania.</p>
<h1 id="przebieg-symulacji-i-analiza">Przebieg symulacji i analiza<a class="headerlink" href="#przebieg-symulacji-i-analiza" title="Permanent link">&para;</a></h1>
<p>W standardowej sytuacji symulacja powinna zaczynać się od większych prędkości obrotowej, które zostają zredukowane, a następnie uruchamia się na zmianę pointing (B-cross) i stan wyłączony. Jeśli w trakcie pointingu (B-cross) dojdzie
do nadmiernego rozkręcenia satelity, detumbling uruchomi się ponownie. Z reguły pełny zakres czynności powinien wykonać się w trakcie od kilku do kilkunastu tysięcy iteracji. Niestety na ten moment pointing nie jest w pełni skończony i stabilny, stąd towarzyszyć mu mogą nieprzewidywalne zachowania. Oprócz potwierdzenia niektórych parametrów początkowych, standardowo w terminalu pojawia się jedynie informacja o zmianie trybu oraz timer informujący o przeliczonej liczbie iteracji. Chociaż dodawanie logów jest sposobem wygodnym do tymczasowych sprawdzeń i prac rozwojowych, aby nie zaśmiecać kodu i ułatwić pracę bez potrzeby rozgrzebywania poszczególnych funkcji, zaimplementowano narzędzia do analizy. Jednym z nich jest wektor stanu, a drugim rozbudowane możliwości tworzenia wykresów.</p>
<h3 id="wektor-stanu">Wektor stanu<a class="headerlink" href="#wektor-stanu" title="Permanent link">&para;</a></h3>
<p>Jako wektor stanu określana jest tabela zawierająca wszelkie możliwe dane opisujące stan satelity w danych punktach czasu. Zawierać będzie więc prędkość kątową, pozycję, pomiary pola magnetycznego czy wektora słońca, moment obrotowy itd. Sama klasa została tak skonstruowana, aby możliwe było dodawanie dowolnej wartości w dowolnym momencie. Jeśli w danej iteracji nie będzie ona mierzona lub wyliczana, puste miejsca zapełnione będą wartością nan. Poniższy kod przedstawia możliwości zarejestrowania wartości w tabeli:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="n">satellite</span><span class="o">.</span><span class="n">state_vector</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>  <span class="c1"># without reset it would accumulate data from previous tests</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="n">satellite</span><span class="o">.</span><span class="n">state_vector</span><span class="o">.</span><span class="n">next_row</span><span class="p">()</span>  <span class="c1"># initialization and iterating row index</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="n">satellite</span><span class="o">.</span><span class="n">_state_vector</span><span class="o">.</span><span class="n">register_vector</span><span class="p">(</span><span class="s2">&quot;angular_velocity&quot;</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">angular_velocity</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">])</span>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="n">satellite</span><span class="o">.</span><span class="n">_state_vector</span><span class="o">.</span><span class="n">register_value</span><span class="p">(</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">latitude</span><span class="p">)</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a><span class="nb">print</span><span class="p">(</span><span class="n">satellite</span><span class="o">.</span><span class="n">_state_vector</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">())</span>
</span></code></pre></div>
<p>Powyższy kod zwróci:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>angular_velocity_x angular_velocity_y angular_velocity_z latitude
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>0 2.0               -3.0               4.0                26.40241
</span></code></pre></div>
<p>Jeśli usuniemy pierwszą linijkę satellite.state_vector.reset() i wykonamy kolejne kilka linijek kilka razy, dane zaczną się akumulować. Jeśli dodatkowo w trakcie zarejestrujemy nowy parametr, jego początkowe wartości podlegną autouzupełnianiu:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="c1"># satellite.state_vector.reset()  # without reset it would accumulate data from previous tests</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="n">satellite</span><span class="o">.</span><span class="n">state_vector</span><span class="o">.</span><span class="n">next_row</span><span class="p">()</span>  <span class="c1"># initialization and iterating row index</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="n">satellite</span><span class="o">.</span><span class="n">_state_vector</span><span class="o">.</span><span class="n">register_vector</span><span class="p">(</span><span class="s2">&quot;angular_velocity&quot;</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">angular_velocity</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">])</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a><span class="n">satellite</span><span class="o">.</span><span class="n">_state_vector</span><span class="o">.</span><span class="n">register_value</span><span class="p">(</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">latitude</span><span class="p">)</span>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a><span class="c1"># comment out satellite.state_vector.reset() and uncomment the line below to test accumulation</span>
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a><span class="c1"># when some value is not present from the beginning</span>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a><span class="n">satellite</span><span class="o">.</span><span class="n">_state_vector</span><span class="o">.</span><span class="n">register_value</span><span class="p">(</span><span class="s2">&quot;pointing_error&quot;</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">pointing_error_angle</span><span class="p">)</span>
</span><span id="__span-50-9"><a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a>
</span><span id="__span-50-10"><a id="__codelineno-50-10" name="__codelineno-50-10" href="#__codelineno-50-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">satellite</span><span class="o">.</span><span class="n">_state_vector</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">())</span>
</span></code></pre></div>
<p>Powyższy kod zwróci na przykład:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>  angular_velocity_x angular_velocity_y angular_velocity_z latitude pointing_error
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>0 2.0                -3.0               4.0                26.40241 NaN
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a>1 2.0                -3.0               4.0                26.40241 NaN
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a>2 2.0                -3.0               4.0                26.40241 NaN
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a>3 2.0                -3.0               4.0                26.40241 0.0
</span><span id="__span-51-6"><a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a>4 2.0                -3.0               4.0                26.40241 0.0
</span></code></pre></div>
<p>W celu ułatwienia podstawowego zarządzania tabelą w utilities.py powstała funkcja basic_state_vector(), która zapisuje wybrane, podstawowe parametry co iterację. Aby dokonać pełnej analizy, po uruchomieniu można zapisać tabelę do pliku csv:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="n">satellite</span><span class="o">.</span><span class="n">state_vector</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;simulation_state_vector.csv&#39;</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="wykresy">Wykresy<a class="headerlink" href="#wykresy" title="Permanent link">&para;</a></h3>
<p>Kolejnym pomocnym elementem są wykresy. W repozytorium zaimplementowano je w dwóch wariantach. Jednym z nich jest wykorzystanie biblioteki matplotlib. Jest to jedno z najpopularniejszych narzędzi do tworzenia wykresów. Daje możliwość tworzenia najróżniejszych przedstawień danych i doboru stylistyki, a następnie zapisania ich w formie obrazu. Drugim jest plotly, które jest narzędziem nieco bardziej zaawansowanym. Umożliwia tworzenie wykresów z interaktywnym powiększeniem i odczytem dokładnej wartości w formie html lub w okienku notebooka oraz zdefiniowanie wykresów tworzących się na żywo, co jest istotnym ułatwieniem w trakcie prac rozwojowych. Oba warianty zostały zaimplementowane w podobny sposób w pliku visualizations.py jako osobne klasy. Mają one zdefiniowane wzory do tworzenia wykresów liniowych, punktowych czy trójwymiarowych (na użytek wizualizacji orbity). Z użyciem tych wzorów stworzone zostały gotowe funkcje dla wybranych, podstawowych parametrów. Całość jest zebrana w funkcjach o nazwie basic_plots(), która tworzy i zapisuje na koniec te wykresy. Poniżej przedstawiono możliwość wykorzystania zdefiniowanych wzorów do stworzenia dowolnego wykresu:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>from visualizations.visualizations import MatplotlibPlots
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>from visualizations.visualizations import PlotlyPlots
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a>import numpy as np
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a>x = np.arange(0, 10, 0.1)
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a>y = np.sin(x)
</span><span id="__span-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a>
</span><span id="__span-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a>mpl = MatplotlibPlots(save=False, show=True)
</span><span id="__span-53-9"><a id="__codelineno-53-9" name="__codelineno-53-9" href="#__codelineno-53-9"></a>pp = PlotlyPlots(save=False, show=True)
</span><span id="__span-53-10"><a id="__codelineno-53-10" name="__codelineno-53-10" href="#__codelineno-53-10"></a>
</span><span id="__span-53-11"><a id="__codelineno-53-11" name="__codelineno-53-11" href="#__codelineno-53-11"></a>mpl.line_plot({&quot;Sine Wave&quot;: (x, y)}, &quot;Sine Function&quot;, &quot;X-axis&quot;, &quot;sin(x)&quot;, &quot;sine_wave_matplotlib&quot;)
</span><span id="__span-53-12"><a id="__codelineno-53-12" name="__codelineno-53-12" href="#__codelineno-53-12"></a>pp.line_plot({&quot;Sine Wave&quot;: (x, y)}, &quot;Sine Function&quot;, &quot;X-axis&quot;, &quot;sin(x)&quot;, &quot;sine_wave_plotly&quot;)
</span></code></pre></div>
<p>Powyższy kod powinien skutkować wyświetleniem dwóch wykresów. Poniżej natomiast przedstawiono, jak dodać wykonywanie wykresów na bieżąco z wykorzystaniem plotly. Pełny przykład można znaleźć w notatnikowej wersji symulacji. Poniższy kawałek należy dodać na początku, aby zainicjalizować wykres:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="n">live_w</span> <span class="o">=</span> <span class="n">LivePlotlyLine</span><span class="p">(</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>  <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;wx&quot;</span><span class="p">,</span> <span class="s2">&quot;wy&quot;</span><span class="p">,</span> <span class="s2">&quot;wz&quot;</span><span class="p">,</span> <span class="s2">&quot;|w|&quot;</span><span class="p">],</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>  <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Angular velocity (live)&quot;</span><span class="p">,</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a>  <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Time (s)&quot;</span><span class="p">,</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a>  <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;deg/s&quot;</span><span class="p">,</span>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a>  <span class="n">window</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>  <span class="c1"># rolling window in &#39;Time (s)&#39; units</span>
</span><span id="__span-54-7"><a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a><span class="p">)</span>
</span></code></pre></div>
<p>Aby wykres na bieżąco się aktualizował już na etapie każdej iteracji, należy dodać następujący kawałek kodu:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="n">wx</span><span class="p">,</span> <span class="n">wy</span><span class="p">,</span> <span class="n">wz</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">satellite</span><span class="o">.</span><span class="n">angular_velocity</span><span class="p">)</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="n">wmag</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">wx</span><span class="o">*</span><span class="n">wx</span> <span class="o">+</span> <span class="n">wy</span><span class="o">*</span><span class="n">wy</span> <span class="o">+</span> <span class="n">wz</span><span class="o">*</span><span class="n">wz</span><span class="p">))</span>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="n">live_w</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="p">[</span><span class="n">wx</span><span class="p">,</span> <span class="n">wy</span><span class="p">,</span> <span class="n">wz</span><span class="p">,</span> <span class="n">wmag</span><span class="p">])</span>
</span></code></pre></div>
<p>W ten sposób poniżej wyświetli się interaktywwna wersja wykresu, obejmująca zadefiniowaną powyżej liczbę punktów. Możliwe jest zdefiniowanie i wyświetlanie kilku wykresów. Warto wspomnieć, że dla wykresów z użyciem matplotlib zdefiniowano klasę konfiguracyjną, gdzie można ustalić parametry dotyczące stylistyki wykresów.</p>
<h3 id="testy">Testy<a class="headerlink" href="#testy" title="Permanent link">&para;</a></h3>
<p>Jako że to repozytorium ma bardziej charakter naukowy-inżynierski, testy nie są tutaj zaimplementowane w klasycznie programistycznym rozumieniu. Ich celem jest raczej ułatwienie edycji, pozwalając upewnić się co do działania pewnych elementów kodu i upewnienia się, że całe fragmenty zwracają wartości w oczekiwanym kształcie. Może to pomagać identyfikować potencjalne błędy powstałe w trakcie edycji. Uruchomienie testów odbywa się przy pomocy komendy:</p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="n">pytest</span>
</span></code></pre></div>
<p>Opcjonalnie warto przed uruchomieniem wyczyścić wpisy w terminalu. Taki zabieg poprawi czytelność komunikatu.</p>
<p>Oprócz tego w pliku Jupyter Nootboowk examples.ipynb zamieszczone zostały opisane w tym tekście przekłądy użycia poszczególnych fragmentów. Ich poprawne wykonywanie się również może być ułatwieniem i wskazówką podczas prac rozwojowych.</p>
<h1 id="podsumowanie">Podsumowanie<a class="headerlink" href="#podsumowanie" title="Permanent link">&para;</a></h1>
<p>Stworzony kod jest bazą do dalszych modyfikacji i rozbudowy prostego systemu ADCS dla małego satelity; modułowa architektura ułatwia dodawanie kolejnych sensorów (np. czujnik horyzontu, czujników gwiazd, pełne IMU) oraz aktuatorów (np. koła reakcyjne i hybryda cewką elektromagnetyczna). Wymaga jeszcze dopracowania tryb pointing (B‑cross), w szczególności stabilności, doboru wzmocnień i logiki przełączania. Zachęcam do korzystania, modyfikowania i inspirowania się tym repozytorium we własnych projektach. Jeśli zauważysz błąd lub masz propozycję usprawnienia, achęcam do kontaktu.</p>
<h2 id="materiay">Materiały<a class="headerlink" href="#materiay" title="Permanent link">&para;</a></h2>
<p>Poniżej załączone zostały materiały, które były na różnym etapie pomocne w stworzeniu tej symulacji. Warto zwrócić uwagę, że przy niektórych, konkretnych funkcjach zamieszczone zostały linki do pomocnych materiałów odnoszących się bezpośrednio do nich. Nie są to oczywiście wszystkie wykorzystane źródła. Do niektórych zagadnień, szczególnie związanych z matematyką, transformacjami czy kodem, nieocenione okazały się wątki na różnego rodzaju forach. W zagadnieniach stricte technicznych często dobrymi opracowaniami pochwalić się może anglojęzyczna Wikipedia. Do pracy wykorzystane zostały również modele językowe, zarówno jako zewnętrzny chat, jak i w formie GitHub Copilot.</p>
<p>https://www.aero.iitb.acs/satelliteWiki/index.php/Main_Page
https://automaticaddison.com/extended-kalman-filter-ekf-with-python-code-example/
https://digitalcommons.usu.edu/smallsat/2019/all2019/49/
https://www.diva-portal.org/smash/get/diva2:1018210/FULLTEXT02.pdf
https://docs.advancednavigation.com/gnss-compass/Foundation%20Knowledge.htm
https://files.core.ac.uk/download/pdf/286701577.pdf
https://www.gov.br/inpe/pt-br/area-conhecimento/unidade-nordeste/conasat/documentacja/nano-satelites-pelo-mundo/aausat-3-aalborg-university-denmark/aausat-3-adcs-attitudedeterminationandcontrolsystem.pdf
https://magneticearth.org/pages/models.html
https://medium.com/@sasha_przybylski/the-math-behind-extended-kalman-filtering-0df981a87453
https://naif.jpl.nasa.gov/pub/naif/toolkit_docs/Tutorials/pdf/individual_docs/17_frames_and_coordinate_systems.pdf
https://quaternions.online/
https://probablydance.com/2017/08/05/intuitive-quaternions/
https://www.3dgep.com/understanding-quaternions/</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 16, 2025</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/arekdrabik" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:arek.drabik1453@gmail.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["content.code.copy", "navigation.tabs", "navigation.top", "search.highlight", "search.suggest"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>